(this["webpackJsonpreact-pdf-label-mapper"]=this["webpackJsonpreact-pdf-label-mapper"]||[]).push([[0],{167:function(e,t,n){e.exports=n.p+"static/media/rectangle-32.33dff571.png"},168:function(e,t,n){e.exports=n.p+"static/media/circle-32.62cd93bf.png"},169:function(e,t,n){e.exports=n.p+"static/media/measure-32.67b2ae58.png"},170:function(e,t,n){e.exports=n.p+"static/media/polygon-32.465bcdec.png"},172:function(e,t,n){e.exports=n(505)},177:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){},192:function(e,t){},194:function(e,t){},195:function(e,t){},196:function(e,t){},197:function(e,t){},234:function(e,t,n){},50:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=50},500:function(e,t,n){},501:function(e,t,n){},502:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAABlklEQVRYhe2WTU4CQRCFPyHMRlxrXHgA8A7iQpeixKA3IKDx5xLGeAZdGb2L7kQjI2LizpC4w4UsBBddk24JwkwNYkh4SaWhp1+9x1RNMTDFBMMDisA14AMfEj5wJde8vxIvAC9Ad0g0gK1RCieAM0fgDjgAMsCsRBY4BKrOuVPhxkYg/gmUhiRNAGU5G5iIhYIjvhKBl3NMbGrFPWzNSwp+RbjPQEpjoIituaaWSeBecmy7F8ImCzr5HOgoDHwBF/JZVYYnjPuMhizISg5fQ24JOd2zP2wOuJiTvZa7GbYEM9H8Dszxo4RhDTRlXeqTdFC4CLhvGgM3sq6FPN8P67Leasi7mPpV0T+GD/R5DMMiBbxKgrKCvy/cOspBBJDHjuJcBN4q0MY034ZWHGABeHdMVDC39jckMb+8LZyTuOI1SRSY6GLG6xFmyKQlloFjbM07Iq7+O3bFa/I9j+2JQVFnBLe9VzxACtjBvH41MK9jLeARuMR0u7rhAOaxt9EHFuMkm4pPhDjYidXbcGPF3n+KTzF2fAPhS4dI8qT2ogAAAABJRU5ErkJggg=="},503:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAABoElEQVRYhe2Wv04CQRDGf0K4Rqw1Fj4A+g5ioaUoMegbEND45yWM8Rm0Mvou2olGEDGxMyR2WEghWOxsdiV3x90eYkj4kslyu/vNN7czOxxMMcHwgBJwAzSAT7EGcC1r3l+JF4FXoD/EWsD2KIVTwLklcA8cAjlgVmwZOAJq1r4z4SaGFv8CykOcpoCK7NVBJELREl+NwctbQWy5inuYnJcd+FXhvgAZlwBKmJwHHbvOtx/SwIOs79gLUQtDV/IF0IvIsfENXMpvpzQ8o6LPhewJOwFQt6OP6hOx0RFyNkA0yGzMyVzHnoyagpl48Yb6+JXCqAG0ZVzycaotbM7mvrsEcCvjesT9ftiQ8c6FvIfKXw33a/iIzzWMigzwJg4qDvwD4TZxbEQABUwrzsfgrQFdVPFtuooDLAAfVhBV1NEGIY16865wTpOK18WRDqKPaq/HqCaTFVsBTjA574m489+xLV6X5wKmJsKsyQiOfVBcIwPsoj6/WqjPsQ7wBFyhqt254ADmMcfYABaTOJuKT4Q4mI41WHBjxf5/ik8xdvwAPJSNQBe3JaQAAAAASUVORK5CYII="},504:function(e,t,n){e.exports=n.p+"static/media/sample.136c7036.pdf"},505:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(104),o=n.n(i),r=(n(177),n(69)),s=n(48),c=n(4),g=n(26),p=n(27),h=n(28),d=n(29),u=n(164),m=n(37),f=n(47),y=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(g.a)(this,n),(a=t.call(this,e)).state={displayTooltip:!1},a.hideTooltip=a.hideTooltip.bind(Object(f.a)(a)),a.showTooltip=a.showTooltip.bind(Object(f.a)(a)),a}return Object(p.a)(n,[{key:"hideTooltip",value:function(){this.setState({displayTooltip:!1})}},{key:"showTooltip",value:function(){this.setState({displayTooltip:!0})}},{key:"render",value:function(){var e=this.props.message,t=this.props.position;return l.a.createElement("span",{className:"tooltip",onMouseLeave:this.hideTooltip},this.state.displayTooltip&&l.a.createElement("div",{className:"tooltip-bubble tooltip-".concat(t)},l.a.createElement("div",{className:"tooltip-message"},e)),l.a.createElement("span",{className:"tooltip-trigger",onMouseOver:this.showTooltip},this.props.children))}}]),n}(a.Component),E={display:"flex",alignItems:"center",justifyContent:"center",border:"solid 1px #ddd",opacity:.75},L=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return"measure"===this.props.highlight.legend.shape?l.a.createElement("div",{onClick:function(t){t.persist(),e.props.onClick(t)}},l.a.createElement(y,{message:this.props.highlight.legend.name,position:"left"},"\u3000\u3000\u3000\u3000"),l.a.createElement(m.Line,{within:"MouseSelection-container",x0:this.props.highlight.x0,y0:this.props.highlight.y0,x1:this.props.highlight.x1,y1:this.props.highlight.y1,borderColor:this.props.highlight.legend.color?this.props.highlight.legend.color:"red"}),l.a.createElement("p",{style:{fontSize:"0.8em",position:"absolute",top:"".concat(this.props.highlight.geometry.center.y,"px"),left:"".concat(this.props.highlight.geometry.center.x,"px"),transform:"rotate(".concat(this.props.highlight.geometry.angle,"deg)"),transformOrigin:"0 0",color:"red",alignSelf:"center"}},"".concat((this.props.highlight.geometry.length/(this.props.measurementLength?this.props.measurementRawLength/this.props.measurementLength:1)).toFixed(2)).concat(this.props.measurementUnit?this.props.measurementUnit:"m"))):"polygon"===this.props.highlight.legend.shape?this.props.highlight.points.map((function(t,n){return l.a.createElement("div",{key:n,onClick:function(t){t.persist(),e.props.onClick(t)}},l.a.createElement(m.Line,{within:"MouseSelection-container",x0:t.x0,y0:t.y0,x1:t.x1,y1:t.y1,borderColor:e.props.highlight.legend.color?e.props.highlight.legend.color:"red"}),l.a.createElement("p",{style:{fontSize:"0.8em",position:"absolute",top:"".concat(t.geometry.center.y,"px"),left:"".concat(t.geometry.center.x,"px"),transform:"rotate(".concat(t.geometry.angle,"deg)"),transformOrigin:"0 0",color:"red",alignSelf:"center"}},t.geometry.length>0&&"".concat((t.geometry.length/(e.props.measurementLength?e.props.measurementRawLength/e.props.measurementLength:1)).toFixed(2)).concat(e.props.measurementUnit?e.props.measurementUnit:"m")))})):l.a.createElement(u.a,{position:{x:this.props.highlight.x,y:this.props.highlight.y},size:{width:this.props.highlight.width,height:this.props.highlight.height},style:Object(c.a)({},E,{background:this.props.highlight.legend.color?this.props.highlight.legend.color:"#f0f0f0",borderRadius:"circle"===this.props.highlight.legend.shape?"100%":null}),onClick:function(t){t.persist(),e.props.onClick(t)},onDragStop:function(t,n){var a=Object(c.a)({},e.props.highlight,{y:n.y,x:n.x});e.props.onChange(a)},onResizeStop:function(t,n,a,l,i){var o=Object(c.a)({},e.props.highlight,{width:a.offsetWidth,height:a.offsetHeight,y:i.y,x:i.x});e.props.onChange(o)}},l.a.createElement(y,{message:this.props.highlight.legend.name,position:"left"},"\u3000\u3000\u3000\u3000"))}}]),n}(a.Component),b=n(167),v=n.n(b),C=n(168),x=n.n(C),w=n(169),S=n.n(w),k=n(170),A=n.n(k);var T=function(e){switch(e.name){case"square":return l.a.createElement("img",{src:v.a,alt:"Square",style:{width:28,height:28,alignSelf:"center",marginTop:5}});case"circle":return l.a.createElement("img",{src:x.a,alt:"Circle",style:{width:28,height:28,alignSelf:"center",marginTop:5}});case"measure":return l.a.createElement("img",{src:S.a,alt:"Square",style:{width:28,height:28,alignSelf:"center",marginTop:5}});case"polygon":return l.a.createElement("img",{src:A.a,alt:"Polygon",style:{width:28,height:28,alignSelf:"center",marginTop:5}});default:return null}},I={display:"flex",border:"solid 1px #ddd",marginLeft:"1em",marginRight:"1em",cursor:"pointer"};var M=function(e){var t=e.legend,n=e.onClick;return t?l.a.createElement("div",null,l.a.createElement("div",{style:Object(c.a)({},I),onClick:n},l.a.createElement("div",{style:{width:32,backgroundColor:"".concat(t.color)}},l.a.createElement(T,{name:t.shape})),l.a.createElement("div",{style:{width:"100%"}},l.a.createElement("strong",{style:{width:"100%",overflowWrap:"break-word",wordWrap:"break-word",hyphens:"auto",marginTop:"10px",marginLeft:"10px",fontSize:"0.8em",display:"flex",flexDirection:"row"}},"(".concat(t.tally?t.tally:0,") ").concat(t.name))))):l.a.createElement("div",{style:I},"-")},U=(n(187),n(188),function(e){return e.show?l.a.createElement("div",{className:"Backdrop",onClick:e.clicked}):null}),H=function(e){return l.a.createElement("div",null,l.a.createElement(U,{show:e.show,clicked:e.modalClosed}),l.a.createElement("div",{className:"Modal",style:{transform:e.show?"translateY(0)":"translateY(-100vh)",opacity:e.show?1:0}},e.children))},O=n(105),R=n(506),j=(n(234),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={locked:!1,start:null,end:null,polygons:[]},e.root=HTMLElement,e.reset=function(){(0,e.props.onDragEnd)(),e.setState({start:null,end:null,locked:!1})},e}return Object(p.a)(n,[{key:"getBoundingRect",value:function(e,t){return{left:Math.min(t.x,e.x),top:Math.min(t.y,e.y),width:Math.abs(t.x-e.x),height:Math.abs(t.y-e.y)}}},{key:"componentDidMount",value:function(){var e=this;if(this.root){var t=this,n=this.props,a=n.onSelection,l=n.onDragStart,i=n.onDragEnd,o=n.shouldStart,r=this.root.parentElement;if(r instanceof HTMLElement){var g=null,p=function(e,t){return g||(g=r.getBoundingClientRect()),{x:e-g.left+r.scrollLeft,y:t+r.scrollTop,pageX:e,pageY:t,containerLeft:g.left,containerTop:g.top,scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}};document.body.addEventListener("keyup",(function(t){"Escape"!==t.key&&"Esc"!==t.key&&27!==t.key||e.setState({polygons:[]},(function(){e.reset()}))})),r.addEventListener("mousemove",(function(n){var a=e.state,l=a.start,i=a.locked;e.props.onPositionMove&&e.props.onPositionMove(p(n.pageX,n.pageY)),l&&!i&&t.setState(Object(c.a)({},e.state,{end:p(n.pageX,n.pageY)}))})),r.addEventListener("mousedown",(function(n){var c=e.state,g=c.start,h=c.end;if(o(n)){var d=n.target;if(d instanceof HTMLElement){if(e.setState({start:p(n.pageX,n.pageY),end:null,locked:!1},(function(){if("polygon"!==e.props.selectedLegend.shape||"measure"!==e.props.selectedLegend.shape)if(e.props.defaultHighlight){var n={left:e.state.start.x-e.props.defaultHighlight.width/2,top:e.state.start.y-e.props.defaultHighlight.height/2,width:e.props.defaultHighlight.width,height:e.props.defaultHighlight.height};a(d,n,t.reset),i()}else l()})),"polygon"===e.props.selectedLegend.shape){var u=Object(R.a)();if(h){var m=p(n.pageX,n.pageY),f={id:u,x0:g.x,y0:g.y,x1:m.x,y1:m.y};if(!(n.target instanceof HTMLElement)||!r.contains(n.target))return void t.reset();t.setState({end:m,polygons:[].concat(Object(s.a)(e.state.polygons),[f])},(function(){var e=t.state,a=e.start,l=e.end;a&&l&&n.target instanceof HTMLElement&&i()}))}}document.body&&(document.body.addEventListener("mouseup",(function n(l){l.currentTarget.removeEventListener("mouseup",n);var o=e.state.start;if(o&&"polygon"!==e.props.selectedLegend.shape){var s=p(l.pageX,l.pageY),c=t.getBoundingRect(o,s),g={x0:o.x,y0:o.y,x1:s.x,y1:s.y};l.target instanceof HTMLElement&&r.contains(l.target)&&t.shouldRender(c,e.props.selectedLegend.shape)?t.setState({end:s,locked:!0},(function(){var n=t.state,o=n.start,r=n.end;o&&r&&l.target instanceof HTMLElement&&("measure"===e.props.selectedLegend.shape||"calibrate"===e.props.selectedLegend.shape?a(d,g,t.reset):a(d,c,t.reset),i())})):t.reset()}})),document.body.addEventListener("dblclick",(function(n){var l=e.state,o=l.start,r=l.end,s=l.polygons;o&&r&&n.target instanceof HTMLElement&&(a(d,s,t.reset),i())})))}}else e.reset()}))}}}},{key:"shouldRender",value:function(e,t){return"circle"===t||"square"===t?e.width>=1&&e.height>=1:e.left>=1&&e.top>=1}},{key:"render",value:function(){var e=this,t=this.state,n=t.start,a=t.end;return l.a.createElement("div",{className:"MouseSelection-container",ref:function(t){return e.root=t}},n&&a?this.props.selectedLegend&&("circle"===this.props.selectedLegend.shape||"square"===this.props.selectedLegend.shape?l.a.createElement("div",{className:"MouseSelection",style:Object(c.a)({},this.getBoundingRect(n,a),{backgroundColor:this.props.selectedLegend.color,borderRadius:"circle"===this.props.selectedLegend.shape?"100%":null})}):"measure"===this.props.selectedLegend.shape||"calibrate"===this.props.selectedLegend.shape?l.a.createElement(m.Line,{within:"MouseSelection-container",borderColor:this.props.selectedLegend.color,x0:n.x,y0:n.y,x1:a.x,y1:a.y}):l.a.createElement("div",null,l.a.createElement(m.Line,{within:"MouseSelection-container",borderColor:this.props.selectedLegend.color,x0:n.x,y0:n.y,x1:a.x,y1:a.y}),this.state.polygons.map((function(t,n){return l.a.createElement(m.Line,{key:n,within:"MouseSelection-container",borderColor:e.props.selectedLegend.color,x0:t.x0,y0:t.y0,x1:t.x1,y1:t.y1})})))):null)}}]),n}(a.Component)),D=n(106),P=(n(500),n(501),{backgroundColor:"#4CAF50",border:"none",color:"white",padding:"5px 10px",textAlign:"center",textDecoration:"none",display:"inline-block",fontSize:"12px",cursor:"pointer"}),B=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={highlights:e.props.highlights,lines:[],filteredHighlights:[],legends:e.props.legends,legendInput:"",shapeInput:"",colorInput:"",legendUpdateInput:"",shapeUpdateInput:"",colorUpdateInput:"",scaleUpdateInput:0,x:0,y:0,pageX:0,pageY:0,containerLeft:0,containerTop:0,scrollLeft:0,scrollTop:0,defaultHighlight:null,canCreate:!0,numPages:null,pageNumber:1,isAreaSelectionInProgress:!1,selectedLegend:null,selectedTool:"square",modalLegendToggle:!1,modalLegendUpdateToggle:!1,modalMeasurementToggle:!1,measurementCalibrateHighlight:e.props.measurementCalibrateHighlight?e.props.measurementCalibrateHighlight:null,measurementRawLength:e.props.measurementRawLength,measurementRawInput:e.props.measurementRawLength?e.props.measurementRawLength:1,measurementLength:e.props.measurementLength?e.props.measurementLength:1,measurementLengthInput:e.props.measurementLength?e.props.measurementLength:1,measurementUnit:e.props.measurementUnit?e.props.measurementUnit:"m",measurementUnitInput:e.props.measurementUnit?e.props.measurementUnit:"m",showTip:null,scale:1,cursor:"crosshair"},e.componentDidUpdate=function(t){t.measurementLength!==e.props.measurementLength&&e.setState({measurementLength:e.props.measurementLength}),t.measurementRawLength!==e.props.measurementRawLength&&e.setState({measurementRawLength:e.props.measurementRawLength}),t.measurementUnit!==e.props.measurementUnit&&e.setState({measurementUnit:e.props.measurementUnit}),t.legends!==e.props.legends&&e.setState({legends:e.props.legends},(function(){e.filterHighlights()})),t.highlights!==e.props.highlights&&e.setState({highlights:e.props.highlights},(function(){e.filterHighlights()}))},e.onDocumentLoadSuccess=function(t){var n=t.numPages;e.setState({numPages:n},(function(){e.filterHighlights(),e.legendTallyHighlights()}))},e.toggleLegendModal=function(t){t.preventDefault(),e.setState({modalLegendToggle:!e.state.modalLegendToggle})},e.toggleLegendUpdateModal=function(t){t.preventDefault(),e.setState({modalLegendUpdateToggle:!e.state.modalLegendUpdateToggle})},e.toggleMeasurementModal=function(t){t.preventDefault(),e.setState({modalMeasurementToggle:!e.state.modalMeasurementToggle})},e.filterHighlights=function(){var t=e.state,n=t.highlights,a=t.pageNumber,l=t.scale,i=JSON.parse(JSON.stringify(n)),o=[];for(var r in i)if(i[r].page===a){if("measure"===i[r].legend.shape&&(i[r].x0=i[r].x0+i[r].x0*(l-1),i[r].y0=i[r].y0+i[r].y0*(l-1),i[r].x1=i[r].x1+i[r].x1*(l-1),i[r].y1=i[r].y1+i[r].y1*(l-1),i[r].geometry=e.getLinePoints(i[r])),"polygon"===i[r].legend.shape)for(var s in i[r].points)i[r].points[s].x0=i[r].points[s].x0+i[r].points[s].x0*(l-1),i[r].points[s].y0=i[r].points[s].y0+i[r].points[s].y0*(l-1),i[r].points[s].x1=i[r].points[s].x1+i[r].points[s].x1*(l-1),i[r].points[s].y1=i[r].points[s].y1+i[r].points[s].y1*(l-1),i[r].points[s].geometry=e.getLinePoints(i[r].points[s]);"circle"!==i[r].legend.shape&&"square"!==i[r].legend.shape||(i[r].x=i[r].x+i[r].x*(l-1),i[r].y=i[r].y+i[r].y*(l-1),i[r].width=i[r].width+i[r].width*(l-1),i[r].height=i[r].height+i[r].height*(l-1)),o.push(i[r])}e.setState({filteredHighlights:o})},e.getLinePoints=function(t){var n=e.state.scale,a=t.y0,l=t.y1,i=t.x0,o=t.x1,r=t.y0/n,s=t.y1/n,c=t.x0/n,g=s-r,p=t.x1/n-c;return{dy:g,dx:p,angle:180*Math.atan2(g,p)/Math.PI,length:Math.sqrt(p*p+g*g),center:{x:(o-i)/2+i,y:(l-a)/2+a}}},e.legendTallyHighlights=function(){var t=e.state,n=t.highlights,a=t.legends,l=e.state.selectedLegend;a.map((function(e){return e.tally=n.filter((function(t){return t.legend.id===e.id})).length,l&&l.id===e.id&&(l=e),null})),e.setState({legends:a,selectedLegend:l})},e.changePage=function(t){return e.setState((function(e){return{pageNumber:e.pageNumber+t}}),(function(){e.filterHighlights()}))},e.previousPage=function(){return e.changePage(-1)},e.nextPage=function(){return e.changePage(1)},e.zoomIn=function(){return e.setState((function(e){return{scale:e.scale+.25}}),(function(){e.filterHighlights()}))},e.zoomOut=function(){return e.setState((function(e){return{scale:e.scale-.25}}),(function(){e.filterHighlights()}))},e.renderHighlight=function(t){var n=e.state,a=n.selectedLegend,l=n.pageNumber,i=n.scale,o=Object(R.a)(),r={};if("measure"===e.state.selectedLegend.shape)r={x0:t.x0/i,y0:t.y0/i,x1:t.x1/i,y1:t.y1/i};else if("square"===e.state.selectedLegend.shape||"circle"===e.state.selectedLegend.shape)r={x:t.left/i,y:t.top/i,width:t.width/i,height:t.height/i};else{for(var g in t)t[g].highlight=o,t[g].highlight_id=o;r={points:t}}var p=Object(c.a)({id:o,legend:a,page:l},r),h=[].concat(Object(s.a)(e.state.highlights),[p]);e.setState({highlights:h,defaultHighlight:e.state.defaultHighlight||"square"!==e.state.selectedLegend.shape&&"circle"!==e.state.selectedLegend.shape?e.state.defaultHighlight:r},(function(){e.props.onHighlightCreate&&e.props.onHighlightCreate(p),e.filterHighlights(),e.legendTallyHighlights()}))},e.renderCalibrationHighlight=function(t){var n=e.state.selectedLegend,a={x0:t.x0,y0:t.y0,x1:t.x1,y1:t.y1},l=e.getLinePoints(t),i=Object(c.a)({id:0,legend:n},a,{geometry:l});e.setState({modalMeasurementToggle:!e.state.modalMeasurementToggle,measurementCalibrateHighlight:i,measurementRawInput:i.geometry.length,measurementLengthInput:1})},e.editLegend=function(){var t=e.state,n=t.selectedLegend,a=t.highlights,l=0;if("circle"===n.shape||"square"===n.shape)for(var i in a)if(a[i].legend.id===n.id){l=a[i].width;break}e.setState({legendUpdateInput:n.name,shapeUpdateInput:n.shape,colorUpdateInput:n.color,scaleUpdateInput:l})},e.addLegend=function(){var t=e.state,n=t.legendInput,a=t.shapeInput,l=t.colorInput,i={id:Object(R.a)(),color:l,name:n,shape:a,tally:0},o=[].concat(Object(s.a)(e.state.legends),[i]);e.setState({legends:o,selectedLegend:i},(function(){e.legendTallyHighlights(),e.props.onLegendCreate&&e.props.onLegendCreate(i)}))},e.deleteLegend=function(){var t=e.state,n=t.selectedLegend,a=t.legends,l=t.highlights,i=n,o=a.filter((function(e){return e.id!==n.id})),r=l.filter((function(e){return e.legend.id!==n.id}));e.setState({legends:o,highlights:r,canCreate:!0,selectedLegend:null},(function(){e.filterHighlights(),e.legendTallyHighlights(),e.props.onLegendDelete&&e.props.onLegendDelete(i.id)}))},e.updateLegend=function(){var t=e.state,n=t.legendUpdateInput,a=t.shapeUpdateInput,l=t.colorUpdateInput,i=t.scaleUpdateInput,o=t.selectedLegend,r=t.highlights,s=[];for(var g in r)r[g].legend.id===o.id&&("circle"!==o.shape&&"square"!==o.shape||(r[g].width=i,r[g].height=i),r[g].legend=Object(c.a)({},r[g].legend,{name:n,color:l,shape:"circle"===o.shape||"square"===o.shape?a:r[g].legend.shape}),s.push(r[g]));e.setState({highlights:r,legends:e.state.legends.map((function(e){return e.id===o.id?Object(c.a)({},e,{name:n,color:l,shape:"circle"===o.shape||"square"===o.shape?a:e.shape}):e})),selectedLegend:Object(c.a)({},o,{name:n,color:l,shape:"circle"===o.shape||"square"===o.shape?a:o.shape})},(function(){e.filterHighlights(),e.props.onLegendUpdate&&e.props.onLegendUpdate(e.state.selectedLegend,s)}))},e.calibrateMeasurement=function(){e.setState({measurementLength:e.state.measurementLengthInput,measurementUnit:e.state.measurementUnitInput,measurementRawLength:e.state.measurementRawInput,selectedLegend:null},(function(){e.props.onCalibrateComplete&&e.props.onCalibrateComplete(e.state.measurementRawLength,e.state.measurementLength,e.state.measurementUnit)})),alert("Successfully calibrated.")},e.deleteHighlight=function(t,n){var a=e.state.highlights.filter((function(e){return e.id!==n}));e.setState({highlights:a,canCreate:!0},(function(){e.filterHighlights(),e.legendTallyHighlights(),e.props.onHighlightDelete&&e.props.onHighlightDelete(n)}))},e.updateHighlight=function(t){e.setState({highlights:e.state.highlights.map((function(e){return e.id===t.id?Object(c.a)({},e,{x:t.x,y:t.y,width:t.width,height:t.height}):e}))},(function(){e.filterHighlights(),e.props.onHighlightUpdate&&e.props.onHighlightUpdate(t)}))},e.onSelectLegend=function(t){e.setState({selectedLegend:t,defaultHighlight:null,showTip:t.shape})},e.onCalibrate=function(){e.setState({selectedLegend:{id:0,name:"Calibrating. Drag onto the page to start.",color:"#ff0000",shape:"calibrate"},defaultHighlight:null,showTip:null})},e._onMouseMove=function(t){e.setState({x:t.x,y:t.y,pageX:t.pageX,pageY:t.pageY,containerLeft:t.containerLeft,containerTop:t.containerTop,scrollLeft:t.scrollLeft,scrollTop:t.scrollTop})},e.onChange=function(t){return e.setState(Object(r.a)({},t.target.name,t.target.value))},e.handleChangeComplete=function(t){e.setState({colorInput:t.hex})},e.handleUpdateChangeComplete=function(t){e.setState({colorUpdateInput:t.hex})},e.getPageSize=function(e){console.log(e.originalWidth,e.originalHeight)},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",(function(e){"Backspace"!==e.key&&"8"!==e.key||e.preventDefault()," "!==e.key&&"32"!==e.key||e.preventDefault()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.legends,i=t.legendInput,o=t.shapeInput,r=t.colorInput,s=t.legendUpdateInput,g=t.shapeUpdateInput,p=t.colorUpdateInput,h=t.scaleUpdateInput,d=t.filteredHighlights,u=t.selectedLegend,m=t.modalLegendToggle,f=t.modalLegendUpdateToggle,y=t.modalMeasurementToggle,E=t.pageNumber,b=t.numPages,v=t.measurementRawInput,C=t.measurementLengthInput,x=t.measurementUnitInput,w=t.measurementRawLength,S=t.measurementLength,k=t.measurementUnit,A=t.showTip,I=t.scale,U=t.cursor;return l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(H,{show:m,modalClosed:this.toggleLegendModal},l.a.createElement("h3",null,"+ Add Legend"),l.a.createElement("label",{htmlFor:"legendInput"},"Name"),l.a.createElement("input",{type:"text",name:"legendInput",onChange:this.onChange,value:i,autoComplete:"off",style:{margin:10,padding:10,width:"90%"}}),l.a.createElement("label",{htmlFor:"shapeInput"},"Shape"),l.a.createElement("div",{style:{display:"flex",flexDirection:"row",padding:5}},l.a.createElement("div",{style:{backgroundColor:"square"===o?"#ccc":null,cursor:"pointer",padding:5},onClick:function(){e.setState({shapeInput:"square"})}},l.a.createElement(T,{name:"square"})),l.a.createElement("div",{style:{backgroundColor:"circle"===o?"#ccc":null,cursor:"pointer",padding:5},onClick:function(){e.setState({shapeInput:"circle"})}},l.a.createElement(T,{name:"circle"})),l.a.createElement("div",{style:{backgroundColor:"measure"===o?"#ccc":null,cursor:"pointer",padding:5},onClick:function(){e.setState({shapeInput:"measure"})}},l.a.createElement(T,{name:"measure"})),l.a.createElement("div",{style:{backgroundColor:"polygon"===o?"#ccc":null,cursor:"pointer",padding:5},onClick:function(){e.setState({shapeInput:"polygon"})}},l.a.createElement(T,{name:"polygon"}))),l.a.createElement("label",{htmlFor:"colorInput"},"Colour"),l.a.createElement("div",{style:{margin:10}},l.a.createElement(D.SliderPicker,{color:r,onChangeComplete:this.handleChangeComplete})),l.a.createElement("button",{style:Object(c.a)({},P,{width:"100%",marginTop:10,padding:10,opacity:r&&i&&o?1:.5,cursor:r&&i&&o?"pointer":"not-allowed"}),disabled:!(r&&i&&o),onClick:function(t){e.addLegend(),e.toggleLegendModal(t)}},"Add")),l.a.createElement(H,{show:f,modalClosed:this.toggleLegendUpdateModal},l.a.createElement("h3",null,"Update Legend"),l.a.createElement("label",{htmlFor:"legendUpdateInput"},"Name"),l.a.createElement("input",{type:"text",name:"legendUpdateInput",onChange:this.onChange,value:s,autoComplete:"off",style:{margin:10,padding:10,width:"90%"}}),!u||"circle"!==u.shape&&"square"!==u.shape?null:l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"shapeUpdateInput"},"Shape"),l.a.createElement("div",{style:{display:"flex",flexDirection:"row",padding:5}},l.a.createElement("div",{style:{backgroundColor:"square"===g?"#ccc":null,cursor:"pointer",padding:5},onClick:function(){e.setState({shapeUpdateInput:"square"})}},l.a.createElement(T,{name:"square"})),l.a.createElement("div",{style:{backgroundColor:"circle"===g?"#ccc":null,cursor:"pointer",padding:5},onClick:function(){e.setState({shapeUpdateInput:"circle"})}},l.a.createElement(T,{name:"circle"})))),l.a.createElement("label",{htmlFor:"colorUpdateInput"},"Colour"),l.a.createElement("div",{style:{margin:10}},l.a.createElement(D.SliderPicker,{color:p,onChangeComplete:this.handleUpdateChangeComplete})),!u||"circle"!==u.shape&&"square"!==u.shape?null:l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"scaleUpdateInput"},"Size"),l.a.createElement("input",{type:"number",name:"scaleUpdateInput",onChange:this.onChange,value:h,autoComplete:"off",style:{margin:10,padding:10,width:"90%"}})),l.a.createElement("button",{style:Object(c.a)({},P,{width:"100%",marginTop:10,padding:10,opacity:p&&s&&g?1:.5,cursor:p&&s&&g?"pointer":"not-allowed"}),disabled:!(p&&s&&g),onClick:function(t){e.updateLegend(),e.toggleLegendUpdateModal(t)}},"Update")),l.a.createElement(H,{show:y,modalClosed:this.toggleMeasurementModal},l.a.createElement("h3",null,"Calibrate Measurement"),l.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"measurementRawInput"},"Raw Length (px)"),l.a.createElement("input",{type:"number",name:"measurementLengthInput",onChange:this.onChange,value:v,autoComplete:"off",style:{margin:10,padding:10,width:"70%"}})),l.a.createElement("p",{style:{alignSelf:"center",marginRight:40}},"="),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"measurementLengthInput"},"To"),l.a.createElement("input",{type:"number",name:"measurementLengthInput",onChange:this.onChange,value:C,autoComplete:"off",style:{margin:10,padding:10,width:"90%"}}))),l.a.createElement("label",{htmlFor:"measurementUnitInput"},"Unit"),l.a.createElement("input",{type:"text",name:"measurementUnitInput",onChange:this.onChange,value:x,autoComplete:"off",style:{margin:10,padding:10,width:"90%"}}),l.a.createElement("button",{style:Object(c.a)({},P,{width:"100%",marginTop:10,padding:10,opacity:C&&x?1:.5,cursor:C&&x?"pointer":"not-allowed"}),disabled:!(C&&x),onClick:function(t){e.calibrateMeasurement(),e.toggleMeasurementModal(t)}},"Calibrate")),l.a.createElement("div",{className:"sidebar",style:{width:"400px",height:"100%",position:"fixed",zIndex:100,top:0,left:0,overflowX:"hidden"}},l.a.createElement("div",{className:"description",style:{padding:"1rem"}},l.a.createElement("h3",{style:{marginBottom:"1rem"}},this.props.title),this.props.showDescription&&l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("small",null,"To start creating measurements or shapes, add a legend and select it.")),l.a.createElement("p",null,l.a.createElement("small",null,"To delete, hold \u2325/Alt, then click the measurement/shape."))),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("button",{type:"button",disabled:E<=1,onClick:this.previousPage},"<")," ","Page ",E||(b?1:"--")," of ",b||"--"," ",l.a.createElement("button",{type:"button",disabled:E>=b,onClick:this.nextPage},">"))),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("button",{type:"button",disabled:I<=.25,onClick:this.zoomOut,style:{height:32,marginTop:10}},l.a.createElement("img",{style:{width:16},src:n(502),alt:"-"})),l.a.createElement("p",{style:{marginLeft:10,marginRight:10}},"".concat(100*I,"%")),l.a.createElement("button",{type:"button",disabled:I>=5,onClick:this.zoomIn,style:{height:32,marginTop:10}},l.a.createElement("img",{style:{width:16},src:n(503),alt:"+"})))),l.a.createElement("p",{style:{paddingLeft:"1rem",paddingRight:"1rem"}},l.a.createElement("small",null,"CALIBRATION"),l.a.createElement("button",{style:Object(c.a)({},P,{float:"right"}),onClick:this.onCalibrate},"- recalibrate")),l.a.createElement("p",{style:{paddingLeft:"1rem",paddingRight:"1rem"}},"".concat(w.toFixed(2)," = ").concat(S).concat(k)),l.a.createElement("p",{style:{paddingLeft:"1rem",paddingRight:"1rem"}},l.a.createElement("small",null,"SELECTED")),u?l.a.createElement(M,{legend:u}):l.a.createElement(M,null),u&&"calibrate"!==u.shape&&l.a.createElement("button",{style:Object(c.a)({},P,{marginLeft:"1em",marginRight:"1em",marginTop:"1em"}),onClick:function(t){e.editLegend(),e.toggleLegendUpdateModal(t)}},"Edit"),u&&l.a.createElement("button",{style:Object(c.a)({},P,{backgroundColor:"#DB2828",marginLeft:"1em",marginRight:"1em",marginTop:"1em"}),onClick:function(t){window.confirm('Are you sure to delete the legend "'.concat(u.name,'" together with its highlights?'))&&e.deleteLegend()}},"Delete"),l.a.createElement("div",{style:{paddingLeft:"1rem",paddingRight:"1rem"}},"measure"===A&&l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("small",null,"Click and drag on the page to create a line.")),l.a.createElement("p",null,l.a.createElement("small",null,"Press ESC to cancel while dragging."))),"polygon"===A&&l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("small",null,"Click to create a point, move the mouse to form a line, double click to finish.")),l.a.createElement("p",null,l.a.createElement("small",null,"Press ESC to cancel."))),("circle"===A||"square"===A)&&l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("small",null,"Click and drag on the page to create a shape.")),l.a.createElement("p",null,l.a.createElement("small",null,"Press ESC to cancel while dragging.")))),l.a.createElement("br",null),l.a.createElement("p",{style:{paddingLeft:"1rem",paddingRight:"1rem"}},l.a.createElement("small",null,"LEGENDS"),l.a.createElement("button",{style:Object(c.a)({},P,{float:"right"}),onClick:this.toggleLegendModal},"+ add legend")),a&&a.map((function(t){return l.a.createElement("div",{key:t.id},l.a.createElement(M,{legend:t,onClick:function(){e.onSelectLegend(t)}}))})),this.props.showCoordinates&&l.a.createElement("p",{style:{padding:"1rem"}},"x: ",this.state.x,", y: ",this.state.y,l.a.createElement("br",null),"pageX: ",this.state.pageX,", pageY: ",this.state.pageY,l.a.createElement("br",null),"containerLeft: ",this.state.containerLeft,", containerTop:"," ",this.state.containerTop,l.a.createElement("br",null),"scrollLeft: ",this.state.scrollLeft,", scrollTop:"," ",this.state.scrollTop)),l.a.createElement(O.Document,{file:this.props.file,onLoadSuccess:this.onDocumentLoadSuccess},l.a.createElement("div",{style:{marginLeft:"400px",height:"100vh",position:"relative",cursor:U},onClick:function(e){" "!==e.key&&32!==e.key||console.log("space pressed")}},l.a.createElement("div",null,l.a.createElement(O.Page,{onLoadSuccess:this.getPageSize,pageNumber:E,scale:I,renderTextLayer:!1,renderAnnotationLayer:!1}),l.a.createElement(j,{defaultHighlight:this.state.defaultHighlight,selectedLegend:this.state.selectedLegend,onDragStart:function(){console.log("onDragStart")},onPositionMove:function(t){e._onMouseMove(t)},onDragEnd:function(){e.state.selectedLegend||alert("Please select a legend first from the sidebar.")},onChange:function(t){return e.setState({isAreaSelectionInProgress:t})},shouldStart:function(t){return t.target instanceof HTMLElement&&e.state.selectedLegend},onSelection:function(t,n,a){"calibrate"!==e.state.selectedLegend.shape?e.renderHighlight(n):e.renderCalibrationHighlight(n),a()},scale:I})),d.map((function(t){return l.a.createElement(L,{key:t.id,highlight:t,onChange:function(t){e.updateHighlight(t)},onClick:function(n){if(n.altKey)return e.deleteHighlight(n,t.id)},scale:I,measurementRawLength:w,measurementLength:S,measurementUnit:k})})))))}}]),a}(a.Component);B.defaultProps={showDescription:!0,showCoordinates:!1,measurementLength:1,measurementRawLength:1,measurementUnit:"m",title:"react-pdf-label-mapper",showTips:!0};var N=B,F=[{id:1,name:"Shape 1 - Electrical Configuration",color:"#a9f6ca",shape:"square"},{id:2,name:"Shape 2 - Static Configuration",color:"#2c97a8",shape:"circle"},{id:3,name:"Shape 3 - Cable Linings",color:"#a8662c",shape:"measure"},{id:4,name:"Shape 3 - Poly",color:"#f8762c",shape:"polygon"}],q=[{id:1,legend:{id:2,name:"Shape 2 - Static Configuration",color:"#2c97a8",shape:"circle"},x:288,y:689,width:40,height:30,page:2},{id:2,legend:{id:2,name:"Shape 2 - Static Configuration",color:"#2c97a8",shape:"circle"},x:322,y:663,width:40,height:30,page:2},{id:3,legend:{id:2,name:"Shape 2 - Static Configuration",color:"#2c97a8",shape:"circle"},x:353,y:633,width:40,height:30,page:2},{id:4,legend:{id:1,name:"Shape 1 - Electrical Configuration",color:"#a9f6ca",shape:"square"},x:288,y:300,width:50,height:40,page:1},{id:5,legend:{id:3,name:"Shape 3 - Cable Linings",color:"#a8662c",shape:"measure"},x0:144,y0:94,x1:569,y1:93,page:1}];var z=function(){return l.a.createElement("div",null,l.a.createElement(N,{highlights:q,legends:F,title:"react-pdf-label-mapper",file:n(504),showCoordinates:!0}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[172,1,2]]]);
//# sourceMappingURL=main.7d9d49b3.chunk.js.map