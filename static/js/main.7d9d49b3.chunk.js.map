{"version":3,"sources":["img/rectangle-32.png","img/circle-32.png","img/measure-32.png","img/polygon-32.png","../node_modules/react-pdf/node_modules/pdfjs-dist/build sync","img/zoomout-32.png","img/zoomin-32.png","sample.pdf","Tooltip.js","HighlightArea.js","Shape.js","Legend.js","Backdrop.js","Modal.js","MouseSelection.js","PDFLabelMapper.js","testLegends.js","testHighlights.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","webpackEmptyContext","req","e","Error","code","keys","resolve","id","Tooltip","props","state","displayTooltip","hideTooltip","bind","showTooltip","this","setState","message","position","className","onMouseLeave","onMouseOver","children","Component","style","display","alignItems","justifyContent","border","opacity","HighlightArea","highlight","legend","shape","onClick","event","persist","name","within","x0","y0","x1","y1","borderColor","color","fontSize","top","geometry","center","y","left","x","transform","angle","transformOrigin","alignSelf","length","measurementLength","measurementRawLength","toFixed","measurementUnit","points","map","point","index","key","size","width","height","background","borderRadius","onDragStop","_","data","boundingRect","onChange","onResizeStop","direction","ref","delta","offsetWidth","offsetHeight","Shape","src","Square","alt","marginTop","Circle","Measure","Polygon","legendStyle","marginLeft","marginRight","cursor","Legend","backgroundColor","overflowWrap","wordWrap","hyphens","flexDirection","tally","Backdrop","show","clicked","Modal","modalClosed","MouseSelection","locked","start","end","polygons","root","HTMLElement","reset","onDragEnd","Math","min","abs","that","onSelection","onDragStart","shouldStart","container","parentElement","containerBoundingRect","containerCoords","pageX","pageY","getBoundingClientRect","scrollLeft","scrollTop","containerLeft","containerTop","document","body","addEventListener","onPositionMove","startTarget","target","selectedLegend","defaultHighlight","existBoundingRect","uuid","boundingLine","contains","onMouseUp","currentTarget","removeEventListener","getBoundingRect","shouldRender","node","polygon","buttonStyle","padding","textAlign","textDecoration","PDFLabelMapper","highlights","lines","filteredHighlights","legends","legendInput","shapeInput","colorInput","legendUpdateInput","shapeUpdateInput","colorUpdateInput","scaleUpdateInput","canCreate","numPages","pageNumber","isAreaSelectionInProgress","selectedTool","modalLegendToggle","modalLegendUpdateToggle","modalMeasurementToggle","measurementCalibrateHighlight","measurementRawInput","measurementLengthInput","measurementUnitInput","showTip","scale","componentDidUpdate","prevProps","filterHighlights","onDocumentLoadSuccess","legendTallyHighlights","toggleLegendModal","preventDefault","toggleLegendUpdateModal","toggleMeasurementModal","scaledHighlights","JSON","parse","stringify","s","page","getLinePoints","p","push","line","orig_y0","orig_y1","orig_x0","dy","dx","atan2","PI","sqrt","newSelectedLegendTally","filter","changePage","offset","prevState","previousPage","nextPage","zoomIn","zoomOut","renderHighlight","coordinates","h","highlight_id","newHighlight","newHighlights","onHighlightCreate","renderCalibrationHighlight","editLegend","initialScale","addLegend","newLegend","newLegends","onLegendCreate","deleteLegend","legendToDelete","onLegendDelete","updateLegend","highlightsUpdated","l","onLegendUpdate","calibrateMeasurement","onCalibrateComplete","alert","deleteHighlight","onHighlightDelete","updateHighlight","onHighlightUpdate","onSelectLegend","onCalibrate","_onMouseMove","coords","value","handleChangeComplete","hex","handleUpdateChangeComplete","getPageSize","console","log","originalWidth","originalHeight","htmlFor","type","autoComplete","margin","onChangeComplete","disabled","zIndex","overflowX","marginBottom","title","showDescription","require","paddingLeft","paddingRight","float","window","confirm","showCoordinates","file","onLoadSuccess","renderTextLayer","renderAnnotationLayer","isVisible","resetSelection","altKey","defaultProps","showTips","testLegends","testHighlights","App","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.7d9d49b3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/rectangle-32.33dff571.png\";","module.exports = __webpack_public_path__ + \"static/media/circle-32.62cd93bf.png\";","module.exports = __webpack_public_path__ + \"static/media/measure-32.67b2ae58.png\";","module.exports = __webpack_public_path__ + \"static/media/polygon-32.465bcdec.png\";","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 50;","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAABlklEQVRYhe2WTU4CQRCFPyHMRlxrXHgA8A7iQpeixKA3IKDx5xLGeAZdGb2L7kQjI2LizpC4w4UsBBddk24JwkwNYkh4SaWhp1+9x1RNMTDFBMMDisA14AMfEj5wJde8vxIvAC9Ad0g0gK1RCieAM0fgDjgAMsCsRBY4BKrOuVPhxkYg/gmUhiRNAGU5G5iIhYIjvhKBl3NMbGrFPWzNSwp+RbjPQEpjoIituaaWSeBecmy7F8ImCzr5HOgoDHwBF/JZVYYnjPuMhizISg5fQ24JOd2zP2wOuJiTvZa7GbYEM9H8Dszxo4RhDTRlXeqTdFC4CLhvGgM3sq6FPN8P67Leasi7mPpV0T+GD/R5DMMiBbxKgrKCvy/cOspBBJDHjuJcBN4q0MY034ZWHGABeHdMVDC39jckMb+8LZyTuOI1SRSY6GLG6xFmyKQlloFjbM07Iq7+O3bFa/I9j+2JQVFnBLe9VzxACtjBvH41MK9jLeARuMR0u7rhAOaxt9EHFuMkm4pPhDjYidXbcGPF3n+KTzF2fAPhS4dI8qT2ogAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAABoElEQVRYhe2Wv04CQRDGf0K4Rqw1Fj4A+g5ioaUoMegbEND45yWM8Rm0Mvou2olGEDGxMyR2WEghWOxsdiV3x90eYkj4kslyu/vNN7czOxxMMcHwgBJwAzSAT7EGcC1r3l+JF4FXoD/EWsD2KIVTwLklcA8cAjlgVmwZOAJq1r4z4SaGFv8CykOcpoCK7NVBJELREl+NwctbQWy5inuYnJcd+FXhvgAZlwBKmJwHHbvOtx/SwIOs79gLUQtDV/IF0IvIsfENXMpvpzQ8o6LPhewJOwFQt6OP6hOx0RFyNkA0yGzMyVzHnoyagpl48Yb6+JXCqAG0ZVzycaotbM7mvrsEcCvjesT9ftiQ8c6FvIfKXw33a/iIzzWMigzwJg4qDvwD4TZxbEQABUwrzsfgrQFdVPFtuooDLAAfVhBV1NEGIY16865wTpOK18WRDqKPaq/HqCaTFVsBTjA574m489+xLV6X5wKmJsKsyQiOfVBcIwPsoj6/WqjPsQ7wBFyhqt254ADmMcfYABaTOJuKT4Q4mI41WHBjxf5/ik8xdvwAPJSNQBe3JaQAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/sample.136c7036.pdf\";","import React, { Component } from \"react\";\n\nexport class Tooltip extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      displayTooltip: false,\n    };\n\n    this.hideTooltip = this.hideTooltip.bind(this);\n    this.showTooltip = this.showTooltip.bind(this);\n  }\n\n  hideTooltip() {\n    this.setState({ displayTooltip: false });\n  }\n\n  showTooltip() {\n    this.setState({ displayTooltip: true });\n  }\n\n  render() {\n    let message = this.props.message;\n    let position = this.props.position;\n    return (\n      <span className=\"tooltip\" onMouseLeave={this.hideTooltip}>\n        {this.state.displayTooltip && (\n          <div className={`tooltip-bubble tooltip-${position}`}>\n            <div className=\"tooltip-message\">{message}</div>\n          </div>\n        )}\n\n        <span className=\"tooltip-trigger\" onMouseOver={this.showTooltip}>\n          {this.props.children}\n        </span>\n      </span>\n    );\n  }\n}\n\nexport default Tooltip;\n","import React, { Component } from \"react\";\nimport { Rnd } from \"react-rnd\";\nimport { Line } from \"react-lineto\";\n\nimport Tooltip from \"./Tooltip\";\n\nconst style = {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  border: \"solid 1px #ddd\",\n  opacity: 0.75,\n};\n\nexport default class HighlightArea extends Component {\n  render() {\n    return this.props.highlight.legend.shape === \"measure\" ? (\n      <div\n        onClick={(event) => {\n          event.persist();\n          this.props.onClick(event);\n        }}\n      >\n        <Tooltip message={this.props.highlight.legend.name} position={\"left\"}>\n          　　　　\n        </Tooltip>\n        <Line\n          within={\"MouseSelection-container\"}\n          x0={this.props.highlight.x0}\n          y0={this.props.highlight.y0}\n          x1={this.props.highlight.x1}\n          y1={this.props.highlight.y1}\n          borderColor={\n            this.props.highlight.legend.color\n              ? this.props.highlight.legend.color\n              : \"red\"\n          }\n        />\n        <p\n          style={{\n            fontSize: \"0.8em\",\n            position: \"absolute\",\n            top: `${this.props.highlight.geometry.center.y}px`,\n            left: `${this.props.highlight.geometry.center.x}px`,\n            transform: `rotate(${this.props.highlight.geometry.angle}deg)`,\n            transformOrigin: \"0 0\",\n            color: \"red\",\n            alignSelf: \"center\",\n          }}\n        >\n          {`${(\n            this.props.highlight.geometry.length /\n            (this.props.measurementLength\n              ? this.props.measurementRawLength / this.props.measurementLength\n              : 1)\n          ).toFixed(2)}${\n            this.props.measurementUnit ? this.props.measurementUnit : \"m\"\n          }`}\n        </p>\n      </div>\n    ) : this.props.highlight.legend.shape === \"polygon\" ? (\n      this.props.highlight.points.map((point, index) => (\n        <div\n          key={index}\n          onClick={(event) => {\n            event.persist();\n            this.props.onClick(event);\n          }}\n        >\n          <Line\n            within={\"MouseSelection-container\"}\n            x0={point.x0}\n            y0={point.y0}\n            x1={point.x1}\n            y1={point.y1}\n            borderColor={\n              this.props.highlight.legend.color\n                ? this.props.highlight.legend.color\n                : \"red\"\n            }\n          />\n          <p\n            style={{\n              fontSize: \"0.8em\",\n              position: \"absolute\",\n              top: `${point.geometry.center.y}px`,\n              left: `${point.geometry.center.x}px`,\n              transform: `rotate(${point.geometry.angle}deg)`,\n              transformOrigin: \"0 0\",\n              color: \"red\",\n              alignSelf: \"center\",\n            }}\n          >\n            {point.geometry.length > 0 &&\n              `${(\n                point.geometry.length /\n                (this.props.measurementLength\n                  ? this.props.measurementRawLength /\n                    this.props.measurementLength\n                  : 1)\n              ).toFixed(2)}${\n                this.props.measurementUnit ? this.props.measurementUnit : \"m\"\n              }`}\n          </p>\n        </div>\n      ))\n    ) : (\n      <Rnd\n        position={{\n          x: this.props.highlight.x,\n          y: this.props.highlight.y,\n        }}\n        size={{\n          width: this.props.highlight.width,\n          height: this.props.highlight.height,\n        }}\n        style={{\n          ...style,\n          background: this.props.highlight.legend.color\n            ? this.props.highlight.legend.color\n            : \"#f0f0f0\",\n          borderRadius:\n            this.props.highlight.legend.shape === \"circle\" ? \"100%\" : null,\n        }}\n        onClick={(event) => {\n          event.persist();\n          this.props.onClick(event);\n        }}\n        onDragStop={(_, data) => {\n          const boundingRect = {\n            ...this.props.highlight,\n            y: data.y,\n            x: data.x,\n          };\n          this.props.onChange(boundingRect);\n        }}\n        onResizeStop={(_, direction, ref, delta, position) => {\n          const boundingRect = {\n            ...this.props.highlight,\n            width: ref.offsetWidth,\n            height: ref.offsetHeight,\n            y: position.y,\n            x: position.x,\n          };\n\n          this.props.onChange(boundingRect);\n        }}\n      >\n        <Tooltip message={this.props.highlight.legend.name} position={\"left\"}>\n          　　　　\n        </Tooltip>\n      </Rnd>\n    );\n  }\n}\n","import React, { Component } from \"react\";\n\nimport Square from \"./img/rectangle-32.png\";\nimport Circle from \"./img/circle-32.png\";\nimport Measure from \"./img/measure-32.png\";\nimport Polygon from \"./img/polygon-32.png\";\n\nfunction Shape(props) {\n  const { name } = props;\n\n  switch (name) {\n    case \"square\":\n      return (\n        <img\n          src={Square}\n          alt=\"Square\"\n          style={{ width: 28, height: 28, alignSelf: \"center\", marginTop: 5 }}\n        />\n      );\n    case \"circle\":\n      return (\n        <img\n          src={Circle}\n          alt=\"Circle\"\n          style={{ width: 28, height: 28, alignSelf: \"center\", marginTop: 5 }}\n        />\n      );\n    case \"measure\":\n      return (\n        <img\n          src={Measure}\n          alt=\"Square\"\n          style={{ width: 28, height: 28, alignSelf: \"center\", marginTop: 5 }}\n        />\n      );\n    case \"polygon\":\n      return (\n        <img\n          src={Polygon}\n          alt=\"Polygon\"\n          style={{ width: 28, height: 28, alignSelf: \"center\", marginTop: 5 }}\n        />\n      );\n    default:\n      return null;\n  }\n}\n\nexport default Shape;\n","import React from \"react\";\nimport Shape from \"./Shape\";\n\nconst legendStyle = {\n  display: \"flex\",\n  border: \"solid 1px #ddd\",\n  marginLeft: \"1em\",\n  marginRight: \"1em\",\n  cursor: \"pointer\",\n};\n\nfunction Legend(props) {\n  const { legend, onClick } = props;\n\n  return legend ? (\n    <div>\n      <div style={{ ...legendStyle }} onClick={onClick}>\n        <div\n          style={{\n            width: 32,\n            backgroundColor: `${legend.color}`,\n          }}\n        >\n          <Shape name={legend.shape} />\n        </div>\n        <div\n          style={{\n            width: \"100%\",\n          }}\n        >\n          <strong\n            style={{\n              width: \"100%\",\n              overflowWrap: \"break-word\",\n              wordWrap: \"break-word\",\n              hyphens: \"auto\",\n              marginTop: \"10px\",\n              marginLeft: \"10px\",\n              fontSize: \"0.8em\",\n              display: \"flex\",\n              flexDirection: \"row\",\n            }}\n          >\n            {`(${legend.tally ? legend.tally : 0}) ${legend.name}`}\n          </strong>\n        </div>\n      </div>\n    </div>\n  ) : (\n    <div style={legendStyle}>-</div>\n  );\n}\n\nexport default Legend;\n","import React from \"react\";\nimport \"./Backdrop.css\";\n\nconst Backdrop = (props) =>\n  props.show ? (\n    <div className={\"Backdrop\"} onClick={props.clicked}></div>\n  ) : null;\n\nexport default Backdrop;\n","import React from \"react\";\nimport \"./Modal.css\";\nimport Backdrop from \"./Backdrop\";\n\nconst Modal = (props) => {\n  return (\n    <div>\n      <Backdrop show={props.show} clicked={props.modalClosed} />\n      <div\n        className={\"Modal\"}\n        style={{\n          transform: props.show ? \"translateY(0)\" : \"translateY(-100vh)\",\n          opacity: props.show ? 1 : 0,\n        }}\n      >\n        {props.children}\n      </div>\n    </div>\n  );\n};\n\nexport default Modal;\n","import React, { Component } from \"react\";\nimport { Line } from \"react-lineto\";\nimport { v1 as uuid } from \"uuid\";\n\nimport \"./MouseSelection.css\";\n\nclass MouseSelection extends Component {\n  state = {\n    locked: false,\n    start: null,\n    end: null,\n    polygons: [], //set of coords (multiple lines)\n  };\n\n  root = HTMLElement;\n\n  reset = () => {\n    const { onDragEnd } = this.props;\n\n    onDragEnd();\n    this.setState({ start: null, end: null, locked: false });\n  };\n\n  getBoundingRect(start, end) {\n    return {\n      left: Math.min(end.x, start.x),\n      top: Math.min(end.y, start.y),\n\n      width: Math.abs(end.x - start.x),\n      height: Math.abs(end.y - start.y),\n    };\n  }\n\n  componentDidMount() {\n    if (!this.root) {\n      return;\n    }\n\n    const that = this;\n\n    const { onSelection, onDragStart, onDragEnd, shouldStart } = this.props;\n\n    const container = this.root.parentElement;\n\n    if (!(container instanceof HTMLElement)) {\n      return;\n    }\n\n    let containerBoundingRect = null;\n\n    const containerCoords = (pageX, pageY) => {\n      if (!containerBoundingRect) {\n        containerBoundingRect = container.getBoundingClientRect();\n      }\n\n      return {\n        x: pageX - containerBoundingRect.left + container.scrollLeft,\n        y: pageY + container.scrollTop,\n        pageX: pageX,\n        pageY: pageY,\n        containerLeft: containerBoundingRect.left,\n        containerTop: containerBoundingRect.top,\n        scrollLeft: container.scrollLeft,\n        scrollTop: container.scrollTop,\n      };\n    };\n\n    document.body.addEventListener(\"keyup\", (event) => {\n      //When Esc key is pressed, multiple codes to support diff browser spec.\n      if (event.key === \"Escape\" || event.key === \"Esc\" || event.key === 27) {\n        //Reset polygon selection\n        this.setState({ polygons: [] }, () => {\n          this.reset();\n        });\n      }\n    });\n\n    container.addEventListener(\"mousemove\", (event) => {\n      const { start, locked } = this.state;\n\n      this.props.onPositionMove &&\n        this.props.onPositionMove(containerCoords(event.pageX, event.pageY));\n\n      if (!start || locked) {\n        return;\n      }\n\n      that.setState({\n        ...this.state,\n        end: containerCoords(event.pageX, event.pageY),\n      });\n    });\n\n    container.addEventListener(\"mousedown\", (event) => {\n      const { start, end } = this.state;\n      if (!shouldStart(event)) {\n        this.reset();\n        return;\n      }\n\n      const startTarget = event.target;\n\n      if (!(startTarget instanceof HTMLElement)) {\n        return;\n      }\n\n      this.setState(\n        {\n          start: containerCoords(event.pageX, event.pageY),\n          end: null,\n          locked: false,\n        },\n        () => {\n          if (\n            this.props.selectedLegend.shape !== \"polygon\" ||\n            this.props.selectedLegend.shape !== \"measure\"\n          ) {\n            if (this.props.defaultHighlight) {\n              //Create object and close this.\n              // const boundingRect = that.getBoundingRect(start, end);\n              let existBoundingRect = {\n                left:\n                  this.state.start.x - this.props.defaultHighlight.width / 2,\n                top:\n                  this.state.start.y - this.props.defaultHighlight.height / 2,\n                width: this.props.defaultHighlight.width,\n                height: this.props.defaultHighlight.height,\n              };\n              onSelection(startTarget, existBoundingRect, that.reset);\n              onDragEnd();\n            } else {\n              onDragStart();\n            }\n          }\n        }\n      );\n\n      if (this.props.selectedLegend.shape === \"polygon\") {\n        const id = uuid();\n        //Handle mousedown for polygon\n        if (end) {\n          //Add this point to polygons array and start target again.\n          const end = containerCoords(event.pageX, event.pageY);\n\n          const boundingLine = {\n            id,\n            x0: start.x,\n            y0: start.y,\n            x1: end.x,\n            y1: end.y,\n          };\n\n          if (\n            !(event.target instanceof HTMLElement) ||\n            !container.contains(event.target)\n          ) {\n            that.reset();\n            return;\n          }\n\n          that.setState(\n            {\n              end,\n              //locked: true,\n              polygons: [...this.state.polygons, boundingLine],\n            },\n            () => {\n              const { start, end } = that.state;\n\n              if (!start || !end) {\n                return;\n              }\n\n              if (event.target instanceof HTMLElement) {\n                //onSelection(startTarget, boundingLine, that.reset); TODO: call onSelection on dblclick event!\n                //For now, add the line to collection,\n\n                onDragEnd();\n              }\n            }\n          );\n        }\n      }\n\n      const onDoubleClick = (event) => {\n        const { start, end, polygons } = this.state;\n\n        if (!start || !end) {\n          return;\n        }\n\n        if (event.target instanceof HTMLElement) {\n          onSelection(startTarget, polygons, that.reset);\n          onDragEnd();\n        }\n      };\n\n      const onMouseUp = (event) => {\n        // emulate listen once\n        event.currentTarget.removeEventListener(\"mouseup\", onMouseUp);\n\n        const { start } = this.state;\n\n        if (!start || this.props.selectedLegend.shape === \"polygon\") {\n          return;\n        }\n\n        const end = containerCoords(event.pageX, event.pageY);\n\n        const boundingRect = that.getBoundingRect(start, end);\n        const boundingLine = { x0: start.x, y0: start.y, x1: end.x, y1: end.y };\n\n        if (\n          !(event.target instanceof HTMLElement) ||\n          !container.contains(event.target) ||\n          !that.shouldRender(boundingRect, this.props.selectedLegend.shape)\n        ) {\n          that.reset();\n          return;\n        }\n\n        that.setState(\n          {\n            end,\n            locked: true,\n          },\n          () => {\n            const { start, end } = that.state;\n\n            if (!start || !end) {\n              return;\n            }\n\n            if (event.target instanceof HTMLElement) {\n              if (\n                this.props.selectedLegend.shape === \"measure\" ||\n                this.props.selectedLegend.shape === \"calibrate\"\n              ) {\n                onSelection(startTarget, boundingLine, that.reset);\n              } else {\n                onSelection(startTarget, boundingRect, that.reset);\n              }\n\n              onDragEnd();\n            }\n          }\n        );\n      };\n\n      if (document.body) {\n        //Listener for Circle, Line, and Rectangle\n        document.body.addEventListener(\"mouseup\", onMouseUp);\n        //Listener for Polygon\n        document.body.addEventListener(\"dblclick\", onDoubleClick);\n      }\n    });\n  }\n\n  shouldRender(boundingRect, shape) {\n    if (shape === \"circle\" || shape === \"square\") {\n      return boundingRect.width >= 1 && boundingRect.height >= 1;\n    } else {\n      //Measure and polygon\n      return boundingRect.left >= 1 && boundingRect.top >= 1;\n    }\n  }\n\n  render() {\n    const { start, end } = this.state;\n\n    return (\n      <div\n        className=\"MouseSelection-container\"\n        ref={(node) => (this.root = node)}\n      >\n        {start && end\n          ? this.props.selectedLegend &&\n            (this.props.selectedLegend.shape === \"circle\" ||\n            this.props.selectedLegend.shape === \"square\" ? (\n              <div\n                className=\"MouseSelection\"\n                style={{\n                  ...this.getBoundingRect(start, end),\n                  backgroundColor: this.props.selectedLegend.color,\n                  borderRadius:\n                    this.props.selectedLegend.shape === \"circle\"\n                      ? \"100%\"\n                      : null,\n                }}\n              />\n            ) : this.props.selectedLegend.shape === \"measure\" ||\n              this.props.selectedLegend.shape === \"calibrate\" ? (\n              <Line\n                within={\"MouseSelection-container\"}\n                borderColor={this.props.selectedLegend.color}\n                x0={start.x}\n                y0={start.y}\n                x1={end.x}\n                y1={end.y}\n              />\n            ) : (\n              <div>\n                <Line\n                  within={\"MouseSelection-container\"}\n                  borderColor={this.props.selectedLegend.color}\n                  x0={start.x}\n                  y0={start.y}\n                  x1={end.x}\n                  y1={end.y}\n                />\n                {this.state.polygons.map((polygon, index) => (\n                  <Line\n                    key={index}\n                    within={\"MouseSelection-container\"}\n                    borderColor={this.props.selectedLegend.color}\n                    x0={polygon.x0}\n                    y0={polygon.y0}\n                    x1={polygon.x1}\n                    y1={polygon.y1}\n                  />\n                ))}\n              </div>\n            ))\n          : null}\n      </div>\n    );\n  }\n}\n\nexport default MouseSelection;\n","import React, { Component } from \"react\";\nimport HighlightArea from \"./HighlightArea\";\nimport Legend from \"./Legend\";\nimport Shape from \"./Shape\";\nimport Modal from \"./Modal\";\nimport { pdfjs, Document, Page } from \"react-pdf/dist/entry.webpack\";\nimport PropTypes from \"prop-types\";\nimport { v1 as uuid } from \"uuid\";\nimport MouseSelection from \"./MouseSelection\";\n\nimport { SliderPicker } from \"react-color\";\n\nimport \"./styles/Sidebar.css\";\nimport \"./styles/Tooltip.css\";\n\n//pdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n\nconst buttonStyle = {\n  backgroundColor: \"#4CAF50\",\n  border: \"none\",\n  color: \"white\",\n  padding: \"5px 10px\",\n  textAlign: \"center\",\n  textDecoration: \"none\",\n  display: \"inline-block\",\n  fontSize: \"12px\",\n  cursor: \"pointer\",\n};\n\nclass PDFLabelMapper extends Component {\n  state = {\n    highlights: this.props.highlights,\n    lines: [],\n    filteredHighlights: [],\n    legends: this.props.legends,\n    legendInput: \"\",\n    shapeInput: \"\",\n    colorInput: \"\",\n    legendUpdateInput: \"\",\n    shapeUpdateInput: \"\",\n    colorUpdateInput: \"\",\n    scaleUpdateInput: 0,\n    x: 0,\n    y: 0,\n    pageX: 0,\n    pageY: 0,\n    containerLeft: 0,\n    containerTop: 0,\n    scrollLeft: 0,\n    scrollTop: 0,\n    defaultHighlight: null,\n    canCreate: true,\n    numPages: null,\n    pageNumber: 1,\n    isAreaSelectionInProgress: false,\n    selectedLegend: null,\n    selectedTool: \"square\", //square, circle, measure\n    modalLegendToggle: false,\n    modalLegendUpdateToggle: false,\n    modalMeasurementToggle: false,\n    measurementCalibrateHighlight: this.props.measurementCalibrateHighlight\n      ? this.props.measurementCalibrateHighlight\n      : null,\n    measurementRawLength: this.props.measurementRawLength,\n    measurementRawInput: this.props.measurementRawLength\n      ? this.props.measurementRawLength\n      : 1,\n    measurementLength: this.props.measurementLength\n      ? this.props.measurementLength\n      : 1,\n    measurementLengthInput: this.props.measurementLength\n      ? this.props.measurementLength\n      : 1,\n    measurementUnit: this.props.measurementUnit\n      ? this.props.measurementUnit\n      : \"m\",\n    measurementUnitInput: this.props.measurementUnit\n      ? this.props.measurementUnit\n      : \"m\",\n    showTip: null,\n    scale: 1,\n    cursor: \"crosshair\",\n  };\n\n  static propTypes = {\n    legends: PropTypes.array.isRequired,\n    highlights: PropTypes.array.isRequired,\n    onLegendCreate: PropTypes.func,\n    onLegendDelete: PropTypes.func,\n    onHighlightCreate: PropTypes.func,\n    onHighlightUpdate: PropTypes.func,\n    onHighlightDelete: PropTypes.func,\n    title: PropTypes.string.isRequired,\n    showDescription: PropTypes.bool,\n    file: PropTypes.string.isRequired,\n    showCoordinates: PropTypes.bool,\n    measurementLength: PropTypes.number,\n    measurementUnit: PropTypes.string,\n    showTips: PropTypes.bool,\n  };\n\n  componentDidMount() {\n    document.addEventListener(\"keydown\", (event) => {\n      //Prevent going the page to go back when pressing backspace.\n      if (event.key === \"Backspace\" || event.key === \"8\") {\n        event.preventDefault();\n      }\n      if (event.key === \" \" || event.key === \"32\") {\n        event.preventDefault();\n      }\n    });\n  }\n\n  componentDidUpdate = (prevProps) => {\n    if (prevProps.measurementLength !== this.props.measurementLength) {\n      this.setState({\n        measurementLength: this.props.measurementLength,\n      });\n    }\n    if (prevProps.measurementRawLength !== this.props.measurementRawLength) {\n      this.setState({\n        measurementRawLength: this.props.measurementRawLength,\n      });\n    }\n    if (prevProps.measurementUnit !== this.props.measurementUnit) {\n      this.setState({\n        measurementUnit: this.props.measurementUnit,\n      });\n    }\n    if (prevProps.legends !== this.props.legends) {\n      this.setState({ legends: this.props.legends }, () => {\n        this.filterHighlights();\n      });\n    }\n    if (prevProps.highlights !== this.props.highlights) {\n      this.setState({ highlights: this.props.highlights }, () => {\n        this.filterHighlights();\n      });\n    }\n  };\n\n  onDocumentLoadSuccess = ({ numPages }) => {\n    this.setState({ numPages }, () => {\n      this.filterHighlights();\n      this.legendTallyHighlights();\n    });\n  };\n\n  toggleLegendModal = (e) => {\n    e.preventDefault(); //i added this to prevent the default behavior\n    this.setState({\n      modalLegendToggle: !this.state.modalLegendToggle,\n    });\n  };\n\n  toggleLegendUpdateModal = (e) => {\n    e.preventDefault(); //i added this to prevent the default behavior\n    this.setState({\n      modalLegendUpdateToggle: !this.state.modalLegendUpdateToggle,\n    });\n  };\n\n  toggleMeasurementModal = (e) => {\n    e.preventDefault(); //i added this to prevent the default behavior\n    this.setState({\n      modalMeasurementToggle: !this.state.modalMeasurementToggle,\n    });\n  };\n\n  filterHighlights = () => {\n    const { highlights, pageNumber, scale } = this.state;\n\n    //Copy the highlights in 1x scale, but do not update its reference.\n    let scaledHighlights = JSON.parse(JSON.stringify(highlights));\n    let filteredHighlights = [];\n\n    for (let s in scaledHighlights) {\n      if (scaledHighlights[s].page === pageNumber) {\n        if (scaledHighlights[s].legend.shape === \"measure\") {\n          //compute the scale\n          scaledHighlights[s].x0 =\n            scaledHighlights[s].x0 + scaledHighlights[s].x0 * (scale - 1);\n          scaledHighlights[s].y0 =\n            scaledHighlights[s].y0 + scaledHighlights[s].y0 * (scale - 1);\n          scaledHighlights[s].x1 =\n            scaledHighlights[s].x1 + scaledHighlights[s].x1 * (scale - 1);\n          scaledHighlights[s].y1 =\n            scaledHighlights[s].y1 + scaledHighlights[s].y1 * (scale - 1);\n          scaledHighlights[s].geometry = this.getLinePoints(\n            scaledHighlights[s]\n          );\n        }\n        if (scaledHighlights[s].legend.shape === \"polygon\") {\n          for (let p in scaledHighlights[s].points) {\n            //compute the scale\n            scaledHighlights[s].points[p].x0 =\n              scaledHighlights[s].points[p].x0 +\n              scaledHighlights[s].points[p].x0 * (scale - 1);\n            scaledHighlights[s].points[p].y0 =\n              scaledHighlights[s].points[p].y0 +\n              scaledHighlights[s].points[p].y0 * (scale - 1);\n            scaledHighlights[s].points[p].x1 =\n              scaledHighlights[s].points[p].x1 +\n              scaledHighlights[s].points[p].x1 * (scale - 1);\n            scaledHighlights[s].points[p].y1 =\n              scaledHighlights[s].points[p].y1 +\n              scaledHighlights[s].points[p].y1 * (scale - 1);\n            scaledHighlights[s].points[p].geometry = this.getLinePoints(\n              scaledHighlights[s].points[p]\n            );\n          }\n          // scaledHighlights[s].points.map((point) => {\n          //   point.geometry = this.getLinePoints(point);\n          //   // return point;\n          // });\n        }\n\n        if (\n          scaledHighlights[s].legend.shape === \"circle\" ||\n          scaledHighlights[s].legend.shape === \"square\"\n        ) {\n          //compute the scale\n          scaledHighlights[s].x =\n            scaledHighlights[s].x + scaledHighlights[s].x * (scale - 1);\n          scaledHighlights[s].y =\n            scaledHighlights[s].y + scaledHighlights[s].y * (scale - 1);\n          scaledHighlights[s].width =\n            scaledHighlights[s].width + scaledHighlights[s].width * (scale - 1);\n          scaledHighlights[s].height =\n            scaledHighlights[s].height +\n            scaledHighlights[s].height * (scale - 1);\n        }\n\n        filteredHighlights.push(scaledHighlights[s]);\n      }\n    }\n\n    // scaledHighlights.map((highlight) => {\n    //   if (highlight.page === pageNumber) {\n    //     if (highlight.legend.shape === \"measure\") {\n    //       highlight.geometry = this.getLinePoints(highlight);\n    //     }\n    //     if (highlight.legend.shape === \"polygon\") {\n    //       highlight.points.map((point) => {\n    //         point.geometry = this.getLinePoints(point);\n    //         // return point;\n    //       });\n    //     }\n\n    //     console.log(highlight);\n\n    //     //compute the scale\n    //     highlight.x = highlight.x + highlight.x * (scale - 1);\n    //     highlight.y = highlight.y + highlight.y * (scale - 1);\n    //     highlight.width = highlight.width + highlight.width * (scale - 1);\n    //     highlight.height = highlight.height + highlight.height * (scale - 1);\n\n    //     console.log(scale);\n    //     console.log(highlight);\n\n    //     filteredHighlights.push(highlight);\n    //   }\n    //   return null;\n    // });\n\n    this.setState({ filteredHighlights });\n  };\n\n  getLinePoints = (line) => {\n    const { scale } = this.state;\n    let y0 = line.y0;\n    let y1 = line.y1;\n    let x0 = line.x0;\n    let x1 = line.x1;\n\n    //Get original scale of coordinates for length computation\n    let orig_y0 = line.y0 / scale;\n    let orig_y1 = line.y1 / scale;\n    let orig_x0 = line.x0 / scale;\n    let orig_x1 = line.x1 / scale;\n\n    //Compute y and x distance.\n    let dy = orig_y1 - orig_y0;\n    let dx = orig_x1 - orig_x0;\n\n    //Compute angle.\n    let angle = (Math.atan2(dy, dx) * 180) / Math.PI;\n\n    //Compute length.\n    let length = Math.sqrt(dx * dx + dy * dy);\n\n    //Compute centerline.\n    let center = { x: (x1 - x0) / 2 + x0, y: (y1 - y0) / 2 + y0 };\n\n    return {\n      dy,\n      dx,\n      angle,\n      length,\n      center,\n    };\n  };\n\n  legendTallyHighlights = () => {\n    const { highlights, legends } = this.state;\n    let newSelectedLegendTally = this.state.selectedLegend;\n    legends.map((legend) => {\n      legend.tally = highlights.filter((highlight) => {\n        return highlight.legend.id === legend.id;\n      }).length;\n\n      if (newSelectedLegendTally) {\n        if (newSelectedLegendTally.id === legend.id) {\n          newSelectedLegendTally = legend;\n        }\n      }\n\n      return null;\n    });\n\n    this.setState({ legends, selectedLegend: newSelectedLegendTally });\n  };\n\n  changePage = (offset) =>\n    this.setState(\n      (prevState) => ({\n        pageNumber: prevState.pageNumber + offset,\n      }),\n      () => {\n        this.filterHighlights();\n      }\n    );\n\n  previousPage = () => this.changePage(-1);\n\n  nextPage = () => this.changePage(1);\n\n  zoomIn = () =>\n    this.setState(\n      (prevState) => ({\n        scale: prevState.scale + 0.25,\n      }),\n      () => {\n        this.filterHighlights();\n      }\n    );\n\n  zoomOut = () =>\n    this.setState(\n      (prevState) => ({\n        scale: prevState.scale - 0.25,\n      }),\n      () => {\n        this.filterHighlights();\n      }\n    );\n\n  renderHighlight = (highlight) => {\n    const { selectedLegend, pageNumber, scale } = this.state;\n    const id = uuid();\n\n    //When saving, get the coordinates with the original scale (1.x)\n    let coordinates = {};\n    if (this.state.selectedLegend.shape === \"measure\") {\n      coordinates = {\n        x0: highlight.x0 / scale,\n        y0: highlight.y0 / scale,\n        x1: highlight.x1 / scale,\n        y1: highlight.y1 / scale,\n      };\n    } else if (\n      this.state.selectedLegend.shape === \"square\" ||\n      this.state.selectedLegend.shape === \"circle\"\n    ) {\n      coordinates = {\n        x: highlight.left / scale,\n        y: highlight.top / scale,\n        width: highlight.width / scale,\n        height: highlight.height / scale,\n      };\n    } else {\n      for (let h in highlight) {\n        highlight[h].highlight = id;\n        highlight[h].highlight_id = id;\n      }\n      //Polygon\n      coordinates = {\n        points: highlight,\n      };\n    }\n\n    const newHighlight = {\n      id,\n      legend: selectedLegend,\n      page: pageNumber,\n      ...coordinates,\n    };\n    const newHighlights = [...this.state.highlights, newHighlight];\n\n    this.setState(\n      {\n        highlights: newHighlights,\n        defaultHighlight:\n          !this.state.defaultHighlight &&\n          (this.state.selectedLegend.shape === \"square\" ||\n            this.state.selectedLegend.shape === \"circle\")\n            ? coordinates\n            : this.state.defaultHighlight,\n      },\n      () => {\n        this.props.onHighlightCreate &&\n          this.props.onHighlightCreate(newHighlight);\n        this.filterHighlights();\n        this.legendTallyHighlights();\n      }\n    );\n  };\n\n  renderCalibrationHighlight = (highlight) => {\n    const { selectedLegend } = this.state;\n    let coordinates = {\n      x0: highlight.x0,\n      y0: highlight.y0,\n      x1: highlight.x1,\n      y1: highlight.y1,\n    };\n    let geometry = this.getLinePoints(highlight);\n\n    const measurementCalibrateHighlight = {\n      id: 0,\n      legend: selectedLegend,\n      ...coordinates,\n      geometry,\n    };\n\n    this.setState({\n      modalMeasurementToggle: !this.state.modalMeasurementToggle,\n      measurementCalibrateHighlight,\n      measurementRawInput: measurementCalibrateHighlight.geometry.length,\n      measurementLengthInput: 1,\n    });\n  };\n\n  editLegend = () => {\n    const { selectedLegend, highlights } = this.state;\n\n    let initialScale = 0;\n\n    if (\n      selectedLegend.shape === \"circle\" ||\n      selectedLegend.shape === \"square\"\n    ) {\n      //Get initial size\n      for (let h in highlights) {\n        if (highlights[h].legend.id === selectedLegend.id) {\n          initialScale = highlights[h].width;\n          break;\n        }\n      }\n    }\n\n    this.setState({\n      legendUpdateInput: selectedLegend.name,\n      shapeUpdateInput: selectedLegend.shape,\n      colorUpdateInput: selectedLegend.color,\n      scaleUpdateInput: initialScale,\n    });\n  };\n\n  addLegend = () => {\n    const { legendInput, shapeInput, colorInput } = this.state;\n    const id = uuid();\n\n    let newLegend = {\n      id,\n      color: colorInput,\n      name: legendInput,\n      shape: shapeInput,\n      tally: 0,\n    };\n\n    const newLegends = [...this.state.legends, newLegend];\n\n    this.setState(\n      {\n        legends: newLegends,\n        selectedLegend: newLegend,\n      },\n      () => {\n        this.legendTallyHighlights();\n        this.props.onLegendCreate && this.props.onLegendCreate(newLegend);\n      }\n    );\n  };\n\n  deleteLegend = () => {\n    let { selectedLegend, legends, highlights } = this.state;\n\n    let legendToDelete = selectedLegend;\n\n    let newLegends = legends.filter((legend) => {\n      return legend.id !== selectedLegend.id;\n    });\n\n    let newHighlights = highlights.filter((highlight) => {\n      return highlight.legend.id !== selectedLegend.id;\n    });\n\n    this.setState(\n      {\n        legends: newLegends,\n        highlights: newHighlights,\n        canCreate: true,\n        selectedLegend: null,\n      },\n      () => {\n        this.filterHighlights();\n        this.legendTallyHighlights();\n        this.props.onLegendDelete &&\n          this.props.onLegendDelete(legendToDelete.id);\n      }\n    );\n  };\n\n  updateLegend = () => {\n    let {\n      legendUpdateInput,\n      shapeUpdateInput,\n      colorUpdateInput,\n      scaleUpdateInput,\n      selectedLegend,\n      highlights,\n    } = this.state;\n\n    let highlightsUpdated = [];\n\n    for (let h in highlights) {\n      if (highlights[h].legend.id === selectedLegend.id) {\n        if (\n          selectedLegend.shape === \"circle\" ||\n          selectedLegend.shape === \"square\"\n        ) {\n          highlights[h].width = scaleUpdateInput;\n          highlights[h].height = scaleUpdateInput;\n        }\n        highlights[h].legend = {\n          ...highlights[h].legend,\n          name: legendUpdateInput,\n          color: colorUpdateInput,\n          shape:\n            selectedLegend.shape === \"circle\" ||\n            selectedLegend.shape === \"square\"\n              ? shapeUpdateInput\n              : highlights[h].legend.shape, //only for circle and square\n        };\n        highlightsUpdated.push(highlights[h]);\n      }\n    }\n\n    this.setState(\n      {\n        highlights,\n        legends: this.state.legends.map((l) => {\n          return l.id === selectedLegend.id\n            ? {\n                ...l,\n\n                name: legendUpdateInput,\n                color: colorUpdateInput,\n                shape:\n                  selectedLegend.shape === \"circle\" ||\n                  selectedLegend.shape === \"square\"\n                    ? shapeUpdateInput\n                    : l.shape, //only for circle and square,\n              }\n            : l;\n        }),\n        selectedLegend: {\n          ...selectedLegend,\n          name: legendUpdateInput,\n          color: colorUpdateInput,\n          shape:\n            selectedLegend.shape === \"circle\" ||\n            selectedLegend.shape === \"square\"\n              ? shapeUpdateInput\n              : selectedLegend.shape, //only for circle and square,\n        },\n      },\n      () => {\n        this.filterHighlights();\n        this.props.onLegendUpdate &&\n          this.props.onLegendUpdate(\n            this.state.selectedLegend,\n            highlightsUpdated\n          );\n      }\n    );\n  };\n\n  calibrateMeasurement = () => {\n    this.setState(\n      {\n        measurementLength: this.state.measurementLengthInput,\n        measurementUnit: this.state.measurementUnitInput,\n        measurementRawLength: this.state.measurementRawInput,\n        selectedLegend: null,\n      },\n      () => {\n        this.props.onCalibrateComplete &&\n          this.props.onCalibrateComplete(\n            this.state.measurementRawLength,\n            this.state.measurementLength,\n            this.state.measurementUnit\n          );\n      }\n    );\n\n    alert(\"Successfully calibrated.\");\n  };\n\n  deleteHighlight = (e, id) => {\n    const { highlights } = this.state;\n    let newHighlights = highlights.filter((highlight) => {\n      return highlight.id !== id;\n    });\n\n    this.setState({ highlights: newHighlights, canCreate: true }, () => {\n      this.filterHighlights();\n      this.legendTallyHighlights();\n      this.props.onHighlightDelete && this.props.onHighlightDelete(id);\n    });\n  };\n\n  updateHighlight = (highlight) => {\n    this.setState(\n      {\n        highlights: this.state.highlights.map((h) => {\n          return h.id === highlight.id\n            ? {\n                ...h,\n                x: highlight.x,\n                y: highlight.y,\n                width: highlight.width,\n                height: highlight.height,\n              }\n            : h;\n        }),\n      },\n      () => {\n        this.filterHighlights();\n        this.props.onHighlightUpdate && this.props.onHighlightUpdate(highlight);\n      }\n    );\n  };\n\n  onSelectLegend = (legend) => {\n    this.setState({\n      selectedLegend: legend,\n      defaultHighlight: null,\n      showTip: legend.shape,\n    });\n  };\n\n  onCalibrate = () => {\n    let calibrate = {\n      id: 0,\n      name: \"Calibrating. Drag onto the page to start.\",\n      color: \"#ff0000\",\n      shape: \"calibrate\",\n    };\n    this.setState({\n      selectedLegend: calibrate,\n      defaultHighlight: null,\n      showTip: null,\n    });\n  };\n\n  _onMouseMove = (coords) => {\n    this.setState({\n      x: coords.x,\n      y: coords.y,\n      pageX: coords.pageX,\n      pageY: coords.pageY,\n      containerLeft: coords.containerLeft,\n      containerTop: coords.containerTop,\n      scrollLeft: coords.scrollLeft,\n      scrollTop: coords.scrollTop,\n    });\n  };\n\n  onChange = (e) => this.setState({ [e.target.name]: e.target.value });\n\n  handleChangeComplete = (color) => {\n    this.setState({ colorInput: color.hex });\n  };\n\n  handleUpdateChangeComplete = (color) => {\n    this.setState({ colorUpdateInput: color.hex });\n  };\n\n  getPageSize = (page) => {\n    console.log(page.originalWidth, page.originalHeight);\n  };\n\n  render() {\n    const {\n      legends,\n      legendInput,\n      shapeInput,\n      colorInput,\n      legendUpdateInput,\n      shapeUpdateInput,\n      colorUpdateInput,\n      scaleUpdateInput,\n      filteredHighlights,\n      selectedLegend,\n      modalLegendToggle,\n      modalLegendUpdateToggle,\n      modalMeasurementToggle,\n      pageNumber,\n      numPages,\n      measurementRawInput,\n      measurementLengthInput,\n      measurementUnitInput,\n      measurementRawLength,\n      measurementLength,\n      measurementUnit,\n      showTip,\n      scale,\n      cursor,\n    } = this.state;\n\n    return (\n      <div style={{ display: \"flex\" }}>\n        <Modal show={modalLegendToggle} modalClosed={this.toggleLegendModal}>\n          <h3>+ Add Legend</h3>\n          <label htmlFor=\"legendInput\">Name</label>\n          <input\n            type=\"text\"\n            name=\"legendInput\"\n            onChange={this.onChange}\n            value={legendInput}\n            autoComplete=\"off\"\n            style={{ margin: 10, padding: 10, width: \"90%\" }}\n          />\n          <label htmlFor=\"shapeInput\">Shape</label>\n          <div style={{ display: \"flex\", flexDirection: \"row\", padding: 5 }}>\n            <div\n              style={{\n                backgroundColor: shapeInput === \"square\" ? \"#ccc\" : null,\n                cursor: \"pointer\",\n                padding: 5,\n              }}\n              onClick={() => {\n                this.setState({ shapeInput: \"square\" });\n              }}\n            >\n              <Shape name=\"square\" />\n            </div>\n            <div\n              style={{\n                backgroundColor: shapeInput === \"circle\" ? \"#ccc\" : null,\n                cursor: \"pointer\",\n                padding: 5,\n              }}\n              onClick={() => {\n                this.setState({ shapeInput: \"circle\" });\n              }}\n            >\n              <Shape name=\"circle\" />\n            </div>\n            <div\n              style={{\n                backgroundColor: shapeInput === \"measure\" ? \"#ccc\" : null,\n                cursor: \"pointer\",\n                padding: 5,\n              }}\n              onClick={() => {\n                this.setState({ shapeInput: \"measure\" });\n              }}\n            >\n              <Shape name=\"measure\" />\n            </div>\n            <div\n              style={{\n                backgroundColor: shapeInput === \"polygon\" ? \"#ccc\" : null,\n                cursor: \"pointer\",\n                padding: 5,\n              }}\n              onClick={() => {\n                this.setState({ shapeInput: \"polygon\" });\n              }}\n            >\n              <Shape name=\"polygon\" />\n            </div>\n          </div>\n\n          <label htmlFor=\"colorInput\">Colour</label>\n          <div style={{ margin: 10 }}>\n            <SliderPicker\n              color={colorInput}\n              onChangeComplete={this.handleChangeComplete}\n            />\n          </div>\n\n          <button\n            style={{\n              ...buttonStyle,\n              width: \"100%\",\n              marginTop: 10,\n              padding: 10,\n              opacity: !(colorInput && legendInput && shapeInput) ? 0.5 : 1,\n              cursor: !(colorInput && legendInput && shapeInput)\n                ? \"not-allowed\"\n                : \"pointer\",\n            }}\n            disabled={!(colorInput && legendInput && shapeInput)}\n            onClick={(e) => {\n              this.addLegend();\n              this.toggleLegendModal(e);\n            }}\n          >\n            Add\n          </button>\n        </Modal>\n\n        <Modal\n          show={modalLegendUpdateToggle}\n          modalClosed={this.toggleLegendUpdateModal}\n        >\n          <h3>Update Legend</h3>\n          <label htmlFor=\"legendUpdateInput\">Name</label>\n          <input\n            type=\"text\"\n            name=\"legendUpdateInput\"\n            onChange={this.onChange}\n            value={legendUpdateInput}\n            autoComplete=\"off\"\n            style={{ margin: 10, padding: 10, width: \"90%\" }}\n          />\n\n          {selectedLegend &&\n          (selectedLegend.shape === \"circle\" ||\n            selectedLegend.shape === \"square\") ? (\n            <div>\n              <label htmlFor=\"shapeUpdateInput\">Shape</label>\n              <div\n                style={{ display: \"flex\", flexDirection: \"row\", padding: 5 }}\n              >\n                <div\n                  style={{\n                    backgroundColor:\n                      shapeUpdateInput === \"square\" ? \"#ccc\" : null,\n                    cursor: \"pointer\",\n                    padding: 5,\n                  }}\n                  onClick={() => {\n                    this.setState({ shapeUpdateInput: \"square\" });\n                  }}\n                >\n                  <Shape name=\"square\" />\n                </div>\n                <div\n                  style={{\n                    backgroundColor:\n                      shapeUpdateInput === \"circle\" ? \"#ccc\" : null,\n                    cursor: \"pointer\",\n                    padding: 5,\n                  }}\n                  onClick={() => {\n                    this.setState({ shapeUpdateInput: \"circle\" });\n                  }}\n                >\n                  <Shape name=\"circle\" />\n                </div>\n              </div>\n            </div>\n          ) : null}\n\n          <label htmlFor=\"colorUpdateInput\">Colour</label>\n          <div style={{ margin: 10 }}>\n            <SliderPicker\n              color={colorUpdateInput}\n              onChangeComplete={this.handleUpdateChangeComplete}\n            />\n          </div>\n\n          {selectedLegend &&\n          (selectedLegend.shape === \"circle\" ||\n            selectedLegend.shape === \"square\") ? (\n            <div>\n              <label htmlFor=\"scaleUpdateInput\">Size</label>\n              <input\n                type=\"number\"\n                name=\"scaleUpdateInput\"\n                onChange={this.onChange}\n                value={scaleUpdateInput}\n                autoComplete=\"off\"\n                style={{ margin: 10, padding: 10, width: \"90%\" }}\n              />\n            </div>\n          ) : null}\n\n          <button\n            style={{\n              ...buttonStyle,\n              width: \"100%\",\n              marginTop: 10,\n              padding: 10,\n              opacity: !(\n                colorUpdateInput &&\n                legendUpdateInput &&\n                shapeUpdateInput\n              )\n                ? 0.5\n                : 1,\n              cursor: !(\n                colorUpdateInput &&\n                legendUpdateInput &&\n                shapeUpdateInput\n              )\n                ? \"not-allowed\"\n                : \"pointer\",\n            }}\n            disabled={\n              !(colorUpdateInput && legendUpdateInput && shapeUpdateInput)\n            }\n            onClick={(e) => {\n              this.updateLegend();\n              this.toggleLegendUpdateModal(e);\n            }}\n          >\n            Update\n          </button>\n        </Modal>\n\n        <Modal\n          show={modalMeasurementToggle}\n          modalClosed={this.toggleMeasurementModal}\n        >\n          <h3>Calibrate Measurement</h3>\n\n          <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n            <div>\n              <label htmlFor=\"measurementRawInput\">Raw Length (px)</label>\n              <input\n                type=\"number\"\n                name=\"measurementLengthInput\"\n                onChange={this.onChange}\n                value={measurementRawInput}\n                autoComplete=\"off\"\n                style={{ margin: 10, padding: 10, width: \"70%\" }}\n              />\n            </div>\n            <p style={{ alignSelf: \"center\", marginRight: 40 }}>=</p>\n            <div>\n              <label htmlFor=\"measurementLengthInput\">To</label>\n              <input\n                type=\"number\"\n                name=\"measurementLengthInput\"\n                onChange={this.onChange}\n                value={measurementLengthInput}\n                autoComplete=\"off\"\n                style={{ margin: 10, padding: 10, width: \"90%\" }}\n              />\n            </div>\n          </div>\n\n          <label htmlFor=\"measurementUnitInput\">Unit</label>\n          <input\n            type=\"text\"\n            name=\"measurementUnitInput\"\n            onChange={this.onChange}\n            value={measurementUnitInput}\n            autoComplete=\"off\"\n            style={{ margin: 10, padding: 10, width: \"90%\" }}\n          />\n\n          <button\n            style={{\n              ...buttonStyle,\n              width: \"100%\",\n              marginTop: 10,\n              padding: 10,\n              opacity: !(measurementLengthInput && measurementUnitInput)\n                ? 0.5\n                : 1,\n              cursor: !(measurementLengthInput && measurementUnitInput)\n                ? \"not-allowed\"\n                : \"pointer\",\n            }}\n            disabled={!(measurementLengthInput && measurementUnitInput)}\n            onClick={(e) => {\n              this.calibrateMeasurement();\n              this.toggleMeasurementModal(e);\n            }}\n          >\n            Calibrate\n          </button>\n        </Modal>\n        {/* Sidebar */}\n        <div\n          className=\"sidebar\"\n          style={{\n            width: \"400px\",\n            height: \"100%\",\n            position: \"fixed\",\n            zIndex: 100 /* Stay on top */,\n            top: 0 /* Stay at the top */,\n            left: 0,\n            overflowX: \"hidden\" /* Disable horizontal scroll */,\n          }}\n        >\n          <div className=\"description\" style={{ padding: \"1rem\" }}>\n            {/* Name - prop: string */}\n            <h3 style={{ marginBottom: \"1rem\" }}>{this.props.title}</h3>\n\n            {/* Information - prop: boolean */}\n            {this.props.showDescription && (\n              <div>\n                <p>\n                  <small>\n                    To start creating measurements or shapes, add a legend and\n                    select it.\n                  </small>\n                </p>\n                <p>\n                  <small>\n                    To delete, hold ⌥/Alt, then click the measurement/shape.\n                  </small>\n                </p>\n              </div>\n            )}\n            <br />\n\n            {/* Pagination */}\n            <div>\n              <p>\n                <button\n                  type=\"button\"\n                  disabled={pageNumber <= 1}\n                  onClick={this.previousPage}\n                >\n                  {\"<\"}\n                </button>{\" \"}\n                Page {pageNumber || (numPages ? 1 : \"--\")} of {numPages || \"--\"}{\" \"}\n                <button\n                  type=\"button\"\n                  disabled={pageNumber >= numPages}\n                  onClick={this.nextPage}\n                >\n                  {\">\"}\n                </button>\n              </p>\n            </div>\n\n            {/* Scaling */}\n            <div style={{ display: \"flex\" }}>\n              <button\n                type=\"button\"\n                disabled={scale <= 0.25}\n                onClick={this.zoomOut}\n                style={{ height: 32, marginTop: 10 }}\n              >\n                <img\n                  style={{ width: 16 }}\n                  src={require(\"./img/zoomout-32.png\")}\n                  alt=\"-\"\n                />\n              </button>\n              <p style={{ marginLeft: 10, marginRight: 10 }}>{`${\n                scale * 100\n              }%`}</p>\n              <button\n                type=\"button\"\n                disabled={scale >= 5}\n                onClick={this.zoomIn}\n                style={{ height: 32, marginTop: 10 }}\n              >\n                <img\n                  style={{ width: 16 }}\n                  src={require(\"./img/zoomin-32.png\")}\n                  alt=\"+\"\n                />\n              </button>\n            </div>\n          </div>\n\n          <p style={{ paddingLeft: \"1rem\", paddingRight: \"1rem\" }}>\n            <small>CALIBRATION</small>\n            <button\n              style={{ ...buttonStyle, float: \"right\" }}\n              onClick={this.onCalibrate}\n            >\n              - recalibrate\n            </button>\n          </p>\n          <p\n            style={{ paddingLeft: \"1rem\", paddingRight: \"1rem\" }}\n          >{`${measurementRawLength.toFixed(\n            2\n          )} = ${measurementLength}${measurementUnit}`}</p>\n\n          <p style={{ paddingLeft: \"1rem\", paddingRight: \"1rem\" }}>\n            <small>SELECTED</small>\n          </p>\n\n          {selectedLegend ? <Legend legend={selectedLegend} /> : <Legend />}\n          {selectedLegend && selectedLegend.shape !== \"calibrate\" && (\n            <button\n              style={{\n                ...buttonStyle,\n                marginLeft: \"1em\",\n                marginRight: \"1em\",\n                marginTop: \"1em\",\n              }}\n              onClick={(e) => {\n                this.editLegend();\n                this.toggleLegendUpdateModal(e);\n              }}\n            >\n              Edit\n            </button>\n          )}\n          {selectedLegend && (\n            <button\n              style={{\n                ...buttonStyle,\n                backgroundColor: \"#DB2828\",\n                marginLeft: \"1em\",\n                marginRight: \"1em\",\n                marginTop: \"1em\",\n              }}\n              onClick={(e) => {\n                if (\n                  window.confirm(\n                    `Are you sure to delete the legend \"${selectedLegend.name}\" together with its highlights?`\n                  )\n                ) {\n                  this.deleteLegend();\n                }\n              }}\n            >\n              Delete\n            </button>\n          )}\n\n          <div style={{ paddingLeft: \"1rem\", paddingRight: \"1rem\" }}>\n            {showTip === \"measure\" && (\n              <div>\n                <p>\n                  <small>Click and drag on the page to create a line.</small>\n                </p>\n                <p>\n                  <small>Press ESC to cancel while dragging.</small>\n                </p>\n              </div>\n            )}\n\n            {showTip === \"polygon\" && (\n              <div>\n                <p>\n                  <small>\n                    Click to create a point, move the mouse to form a line,\n                    double click to finish.\n                  </small>\n                </p>\n                <p>\n                  <small>Press ESC to cancel.</small>\n                </p>\n              </div>\n            )}\n\n            {(showTip === \"circle\" || showTip === \"square\") && (\n              <div>\n                <p>\n                  <small>Click and drag on the page to create a shape.</small>\n                </p>\n                <p>\n                  <small>Press ESC to cancel while dragging.</small>\n                </p>\n              </div>\n            )}\n          </div>\n\n          <br />\n\n          <p style={{ paddingLeft: \"1rem\", paddingRight: \"1rem\" }}>\n            <small>LEGENDS</small>\n            <button\n              style={{ ...buttonStyle, float: \"right\" }}\n              onClick={this.toggleLegendModal}\n            >\n              + add legend\n            </button>\n          </p>\n\n          {legends &&\n            legends.map((legend) => (\n              <div key={legend.id}>\n                <Legend\n                  legend={legend}\n                  onClick={() => {\n                    this.onSelectLegend(legend);\n                  }}\n                />\n              </div>\n            ))}\n\n          {this.props.showCoordinates && (\n            <p style={{ padding: \"1rem\" }}>\n              x: {this.state.x}, y: {this.state.y}\n              <br />\n              pageX: {this.state.pageX}, pageY: {this.state.pageY}\n              <br />\n              containerLeft: {this.state.containerLeft}, containerTop:{\" \"}\n              {this.state.containerTop}\n              <br />\n              scrollLeft: {this.state.scrollLeft}, scrollTop:{\" \"}\n              {this.state.scrollTop}\n            </p>\n          )}\n        </div>\n\n        <Document\n          file={this.props.file}\n          onLoadSuccess={this.onDocumentLoadSuccess}\n          // onMouseMove={this._onMouseMove.bind(this)}\n        >\n          <div\n            style={{\n              marginLeft: \"400px\",\n              height: \"100vh\",\n              position: \"relative\",\n              cursor: cursor,\n            }}\n            onClick={(e) => {\n              if (e.key === \" \" || e.key === 32) {\n                console.log(\"space pressed\");\n              }\n            }}\n          >\n            <div>\n              <Page\n                onLoadSuccess={this.getPageSize}\n                pageNumber={pageNumber}\n                scale={scale}\n                renderTextLayer={false}\n                renderAnnotationLayer={false}\n              />\n              <MouseSelection\n                defaultHighlight={this.state.defaultHighlight}\n                selectedLegend={this.state.selectedLegend}\n                onDragStart={() => {\n                  console.log(\"onDragStart\");\n                  //This one does nothing?\n                }}\n                onPositionMove={(coords) => {\n                  this._onMouseMove(coords);\n                }}\n                onDragEnd={() => {\n                  if (!this.state.selectedLegend) {\n                    alert(\"Please select a legend first from the sidebar.\");\n                  }\n                }}\n                onChange={(isVisible) =>\n                  this.setState({ isAreaSelectionInProgress: isVisible })\n                }\n                shouldStart={(event) =>\n                  event.target instanceof HTMLElement &&\n                  this.state.selectedLegend\n                }\n                onSelection={(startTarget, highlight, resetSelection) => {\n                  if (this.state.selectedLegend.shape !== \"calibrate\") {\n                    this.renderHighlight(highlight);\n                  } else {\n                    this.renderCalibrationHighlight(highlight);\n                  }\n\n                  resetSelection();\n                }}\n                scale={scale}\n              />\n            </div>\n\n            {filteredHighlights.map((highlight) => (\n              <HighlightArea\n                key={highlight.id}\n                highlight={highlight}\n                onChange={(boundingRect) => {\n                  this.updateHighlight(boundingRect);\n                }}\n                onClick={(e) => {\n                  if (e.altKey) return this.deleteHighlight(e, highlight.id);\n                }}\n                scale={scale}\n                measurementRawLength={measurementRawLength}\n                measurementLength={measurementLength}\n                measurementUnit={measurementUnit}\n              />\n            ))}\n          </div>\n        </Document>\n      </div>\n    );\n  }\n}\n\nPDFLabelMapper.defaultProps = {\n  showDescription: true,\n  showCoordinates: false,\n  measurementLength: 1,\n  measurementRawLength: 1,\n  measurementUnit: \"m\",\n  title: \"react-pdf-label-mapper\",\n  showTips: true,\n};\n\nexport default PDFLabelMapper;\n","const testLegends = [\n  {\n    id: 1,\n    name: \"Shape 1 - Electrical Configuration\",\n    color: \"#a9f6ca\",\n    shape: \"square\",\n  },\n  {\n    id: 2,\n    name: \"Shape 2 - Static Configuration\",\n    color: \"#2c97a8\",\n    shape: \"circle\",\n  },\n  {\n    id: 3,\n    name: \"Shape 3 - Cable Linings\",\n    color: \"#a8662c\",\n    shape: \"measure\",\n  },\n  {\n    id: 4,\n    name: \"Shape 3 - Poly\",\n    color: \"#f8762c\",\n    shape: \"polygon\",\n  },\n];\n\nexport default testLegends;\n","const testHighlights = [\n  {\n    id: 1,\n    legend: {\n      id: 2,\n      name: \"Shape 2 - Static Configuration\",\n      color: \"#2c97a8\",\n      shape: \"circle\",\n    },\n    x: 288,\n    y: 689,\n    width: 40,\n    height: 30,\n    page: 2,\n  },\n  {\n    id: 2,\n    legend: {\n      id: 2,\n      name: \"Shape 2 - Static Configuration\",\n      color: \"#2c97a8\",\n      shape: \"circle\",\n    },\n    x: 322,\n    y: 663,\n    width: 40,\n    height: 30,\n    page: 2,\n  },\n  {\n    id: 3,\n    legend: {\n      id: 2,\n      name: \"Shape 2 - Static Configuration\",\n      color: \"#2c97a8\",\n      shape: \"circle\",\n    },\n    x: 353,\n    y: 633,\n    width: 40,\n    height: 30,\n    page: 2,\n  },\n  {\n    id: 4,\n    legend: {\n      id: 1,\n      name: \"Shape 1 - Electrical Configuration\",\n      color: \"#a9f6ca\",\n      shape: \"square\",\n    },\n    x: 288,\n    y: 300,\n    width: 50,\n    height: 40,\n    page: 1,\n  },\n  {\n    id: 5,\n    legend: {\n      id: 3,\n      name: \"Shape 3 - Cable Linings\",\n      color: \"#a8662c\",\n      shape: \"measure\",\n    },\n    x0: 144,\n    y0: 94,\n    x1: 569,\n    y1: 93,\n    page: 1,\n  },\n];\n\nexport default testHighlights;\n","import React from \"react\";\nimport PDFLabelMapper from \"./PDFLabelMapper\";\nimport testLegends from \"./testLegends\";\nimport testHighlights from \"./testHighlights\";\n\nfunction App() {\n  return (\n    <div>\n      <PDFLabelMapper\n        highlights={testHighlights}\n        legends={testLegends}\n        title={\"react-pdf-label-mapper\"}\n        file={require(\"./sample.pdf\")}\n        showCoordinates={true}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}